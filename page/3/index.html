<!DOCTYPE html>
<html lang="zh-CN">
<head>

    <!--[if lt IE 9]>
        <style>body {display: none; background: none !important} </style>
        <meta http-equiv="Refresh" Content="0; url=//outdatedbrowser.com/" />
    <![endif]-->

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="format-detection" content="telephone=no" />
<meta name="author" content="谢红光" />


    
    


<meta property="og:type" content="website">
<meta property="og:title" content="茶壶盖">
<meta property="og:url" content="http://yoursite.com/page/3/index.html">
<meta property="og:site_name" content="茶壶盖">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="茶壶盖">

<link rel="apple-touch-icon" href= "/apple-touch-icon.png">


    <link rel="alternate" href="/atom.xml" title="茶壶盖" type="application/atom+xml">



    <link rel="shortcut icon" href="/img/dog.jpg">



    <link href="//cdn.bootcss.com/animate.css/3.5.1/animate.min.css" rel="stylesheet">



    <link href="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.css" rel="stylesheet">



    <script src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"></script>
    <link href="//cdn.bootcss.com/pace/1.0.2/themes/blue/pace-theme-minimal.css" rel="stylesheet">


<link rel="stylesheet" href="/css/style.css">


    <style> .article { opacity: 0;} </style>


<link href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">


<title>茶壶盖</title>

<script src="//cdn.bootcss.com/jquery/2.2.4/jquery.min.js"></script>
<script src="//cdn.bootcss.com/clipboard.js/1.5.10/clipboard.min.js"></script>

<script>
    var yiliaConfig = {
        fancybox: true,
        animate: true,
        isHome: true,
        isPost: false,
        isArchive: false,
        isTag: false,
        isCategory: false,
        fancybox_js: "//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.js",
        scrollreveal: "//cdn.bootcss.com/scrollReveal.js/3.1.4/scrollreveal.min.js",
        search: undefined
    }
</script>


    <script> yiliaConfig.jquery_ui = [false]; </script>



    <script> yiliaConfig.rootUrl = "\/";</script>






</head>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
    <header id="header" class="inner">
        <a href="/" class="profilepic">
            <img src="/img/dog.jpg" class="animated zoomIn">
        </a>
        <hgroup>
          <h1 class="header-author"><a href="/">谢红光</a></h1>
        </hgroup>

        

        


        
            <div id="switch-btn" class="switch-btn">
                <div class="icon">
                    <div class="icon-ctn">
                        <div class="icon-wrap icon-house" data-idx="0">
                            <div class="birdhouse"></div>
                            <div class="birdhouse_holes"></div>
                        </div>
                        <div class="icon-wrap icon-ribbon hide" data-idx="1">
                            <div class="ribbon"></div>
                        </div>
                        
                        <div class="icon-wrap icon-link hide" data-idx="2">
                            <div class="loopback_l"></div>
                            <div class="loopback_r"></div>
                        </div>
                        
                        
                        <div class="icon-wrap icon-me hide" data-idx="3">
                            <div class="user"></div>
                            <div class="shoulder"></div>
                        </div>
                        
                    </div>
                    
                </div>
                <div class="tips-box hide">
                    <div class="tips-arrow"></div>
                    <ul class="tips-inner">
                        <li>菜单</li>
                        <li>标签</li>
                        
                        <li>友情链接</li>
                        
                        
                        <li>关于我</li>
                        
                    </ul>
                </div>
            </div>
        

        <div id="switch-area" class="switch-area">
            <div class="switch-wrap">
                <section class="switch-part switch-part1">
                    <nav class="header-menu">
                        <ul>
                        
                            <li><a href="/">主页</a></li>
                        
                            <li><a href="/archives/">所有文章</a></li>
                        
                            <li><a href="/tags/">标签云</a></li>
                        
                            <li><a href="/about/">关于我</a></li>
                        
                        </ul>
                    </nav>
                    <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fa Email" href="/xiehongguang0228@gmail.com" title="Email"></a>
                            
                                <a class="fa GitHub" href="https://github.com/Alvis888" title="GitHub"></a>
                            
                                <a class="fa RSS" href="/atom.xml" title="RSS"></a>
                            
                                <a class="fa StackOverflow" href="https://stackoverflow.com/users/6244981/xiehongguang" title="StackOverflow"></a>
                            
                        </ul>
                    </nav>
                </section>
                
                
                <section class="switch-part switch-part2">
                    <div class="widget tagcloud" id="js-tagcloud">
                        <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/NET/">.NET</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/360云/">360云</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/AZURE/">AZURE</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Axis属性/">Axis属性</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Bt/">Bt</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Build-Event/">Build Event</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/C/">C#</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/C-写入文件/">C#写入文件</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CURD/">CURD</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ESLint/">ESLint</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Email/">Email</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ExecuteNonQuery/">ExecuteNonQuery ()</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Json/">Json</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/LUIS/">LUIS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/React-D3-Axis/">React-D3 Axis</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SQL/">SQL</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SQL-server/">SQL server</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Socket/">Socket</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/VS/">VS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/XML/">XML</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/bat/">bat</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/bot/">bot</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/bot-framework/">bot framework</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/c-c/">c/c++</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/case语句/">case语句</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/date/">date()</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/dialog/">dialog</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/fetch/">fetch</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/fetch链接数据库/">fetch链接数据库</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/gitlab/">gitlab</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hook/">hook</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/html/">html</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/java/">java</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/javascript/">javascript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/material-ui/">material ui</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/microsoft-bot/">microsoft bot</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mysql/">mysql</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/node-js/">node.js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/office/">office</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/php/">php</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/qq/">qq</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/react/">react</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/react-native/">react native</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/rn/">rn</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sate/">sate</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/select/">select</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/server-2008/">server 2008</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/service/">service</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/slack/">slack</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sqlserver/">sqlserver</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sql日期加减/">sql日期加减</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sql日期格式化/">sql日期格式化</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/static/">static</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/string/">string</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/thinkphp/">thinkphp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/time/">time()</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/unicode/">unicode</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/web/">web</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/web-api/">web api</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/webhook/">webhook</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/webhook，Gitlab/">webhook，Gitlab</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/windows-service/">windows service</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/word/">word</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/wpf/">wpf</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/中文/">中文</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/内存管理/">内存管理</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/删除/">删除</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/图片库/">图片库</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/字符串/">字符串</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/存储过程/">存储过程</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/实体形式/">实体形式</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/弹窗/">弹窗</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/截取/">截取</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/搭建/">搭建</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/数据库，AZURE/">数据库，AZURE</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/时间戳/">时间戳</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/电影/">电影</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/登陆页面/">登陆页面</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/种子/">种子</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/空白页/">空白页</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/网盘搜索/">网盘搜索</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/网站/">网站</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/美剧/">美剧</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/设计模式/">设计模式</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/选择框/">选择框</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/邮件/">邮件</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/链接/">链接</a></li></ul>
                    </div>
                </section>
                
                
                
                <section class="switch-part switch-part3">
                    <div id="js-friends">
                    
                      <a class="main-nav-link switch-friends-link" href="https://hexo.io">Hexo</a>
                    
                      <a class="main-nav-link switch-friends-link" href="https://pages.github.com/">GitHub</a>
                    
                      <a class="main-nav-link switch-friends-link" href="http://moxfive.xyz/">MOxFIVE</a>
                    
                    </div>
                </section>
                

                
                
                <section class="switch-part switch-part4">
                
                    <div id="js-aboutme">专注于前端</div>
                </section>
                
            </div>
        </div>
    </header>                
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
      <div class="overlay">
          <div class="slider-trigger"></div>
          <h1 class="header-author js-mobile-header hide"><a href="/" title="回到主页">谢红光</a></h1>
      </div>
    <div class="intrude-less">
        <header id="header" class="inner">
            <a href="/" class="profilepic">
                <img src="/img/dog.jpg" class="animated zoomIn">
            </a>
            <hgroup>
              <h1 class="header-author"><a href="/" title="回到主页">谢红光</a></h1>
            </hgroup>
            
            <nav class="header-menu">
                <ul>
                
                    <li><a href="/">主页</a></li>
                
                    <li><a href="/archives/">所有文章</a></li>
                
                    <li><a href="/tags/">标签云</a></li>
                
                    <li><a href="/about/">关于我</a></li>
                
                <div class="clearfix"></div>
                </ul>
            </nav>
            <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fa Email" target="_blank" href="/xiehongguang0228@gmail.com" title="Email"></a>
                            
                                <a class="fa GitHub" target="_blank" href="https://github.com/Alvis888" title="GitHub"></a>
                            
                                <a class="fa RSS" target="_blank" href="/atom.xml" title="RSS"></a>
                            
                                <a class="fa StackOverflow" target="_blank" href="https://stackoverflow.com/users/6244981/xiehongguang" title="StackOverflow"></a>
                            
                        </ul>
            </nav>
        </header>                
    </div>
    <link class="menu-list" tags="标签" friends="友情链接" about="关于我"/>
</nav>
      <div class="body-wrap">
  
    <article id="post-thinkphp-timedate" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2017/01/17/thinkphp-timedate/" class="article-date">
      <time datetime="2017-01-17T08:37:20.000Z" itemprop="datePublished">2017-01-17</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/01/17/thinkphp-timedate/">thinkphp--time()&amp;&amp;date()</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>time()在PHP中是得到一个数字,这个数字表示从1970-01-01到现在共走了多少秒,很奇怪吧<br>不过这样方便计算,</p>
<p>要找出前一天的时间就是 time()-60<em>60</em>24;<br>要找出前一年的时间就是 time()<em>60</em>60<em>24</em>365</p>
<p>那么如何把这个数字换成日期格式呢,就要用到date函数了</p>
<p>$t=time();<br>echo date(“Y-m-d H:i:s”,$t);   //date(‘w’)</p>
<p>第一个参数的格式分别表示:<br>a - “am” 或是 “pm”<br>A - “AM” 或是 “PM”<br>d - 几日，二位数字，若不足二位则前面补零; 如: “01” 至 “31”<br>D - 星期几，三个英文字母; 如: “Fri”<br>F - 月份，英文全名; 如: “January”<br>h - 12 小时制的小时; 如: “01” 至 “12”<br>H - 24 小时制的小时; 如: “00” 至 “23”<br>g - 12 小时制的小时，不足二位不补零; 如: “1” 至 12”<br>G - 24 小时制的小时，不足二位不补零; 如: “0” 至 “23”<br>i - 分钟; 如: “00” 至 “59”<br>j - 几日，二位数字，若不足二位不补零; 如: “1” 至 “31”<br>l - 星期几，英文全名; 如: “Friday”<br>m - 月份，二位数字，若不足二位则在前面补零; 如: “01” 至 “12”<br>n - 月份，二位数字，若不足二位则不补零; 如: “1” 至 “12”<br>M - 月份，三个英文字母; 如: “Jan”<br>s - 秒; 如: “00” 至 “59”<br>S - 字尾加英文序数，二个英文字母; 如: “th”，”nd”<br>t - 指定月份的天数; 如: “28” 至 “31”<br>U - 总秒数<br>w - 数字型的星期几，如: “0” (星期日) 至 “6” (星期六)<br>Y - 年，四位数字; 如: “1999”<br>y - 年，二位数字; 如: “99”<br>z - 一年中的第几天; 如: “0” 至 “365”<br>其它不在上列的字符则直接列出该字符</p>
<p>&nbsp;</p>
<p>转自 <a href="http://www.thinkphp.cn/topic/9355.html" target="_blank" rel="external">http://www.thinkphp.cn/topic/9355.html</a></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/ThinkPHP/">ThinkPHP</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/date/">date()</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/thinkphp/">thinkphp</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/time/">time()</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-简单的wpf登陆页面" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/12/23/简单的wpf登陆页面/" class="article-date">
      <time datetime="2016-12-23T06:05:54.000Z" itemprop="datePublished">2016-12-23</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/12/23/简单的wpf登陆页面/">（一）简单的wpf登陆页面</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>本学期末的大作业是实现一个简单的地铁售票系统。自己带着几个组员便根据老师的要求开始做，有组员负责设计简单的页面，然后由我对页面进行简单的美化，并实现前后台逻辑。此系列博客将根据情况逐步更新项目进度。</p>
<p>先看页面效果：</p>
<p><a href="http://www.ihongguang.cn/wp-content/uploads/2016/12/login.png" target="_blank" rel="external"><img class="alignnone size-medium wp-image-202" src="http://www.ihongguang.cn/wp-content/uploads/2016/12/login-300x145.png" alt="wpf_login" width="300" height="145"></a></p>
<p>页面的背景是一张图片，顶端的Login 是一个lable,下方分别是2个textbox,2个button,1个textBlock中嵌套一个hyperlink.</p>
<p>1.当双击双击输入框时，会自动清除框内文字</p>
<p>2.点击Cancel,自动退出项目</p>
<p>3.点击OK,校验并登陆</p>
<p>4.元素居中显示，并自动适应当前屏幕</p>
<p>页面xaml文件代码：</p>
<p><div></div></p>
<p><pre><code>&lt;Window x:Class=”subway.MainWindow”<br>    xmlns=”<a href="http://schemas.microsoft.com/winfx/2006/xaml/presentation" target="_blank" rel="external">http://schemas.microsoft.com/winfx/2006/xaml/presentation</a>“<br>    xmlns:x=”<a href="http://schemas.microsoft.com/winfx/2006/xaml" target="_blank" rel="external">http://schemas.microsoft.com/winfx/2006/xaml</a>“<br>    xmlns:d=”<a href="http://schemas.microsoft.com/expression/blend/2008" target="_blank" rel="external">http://schemas.microsoft.com/expression/blend/2008</a>“<br>    xmlns:mc=”<a href="http://schemas.openxmlformats.org/markup-compatibility/2006" target="_blank" rel="external">http://schemas.openxmlformats.org/markup-compatibility/2006</a>“<br>    xmlns:local=”clr-namespace:subway”<br>    mc:Ignorable=”d”<br>    Title=”MainWindow” Margin=”0” Height=”1478.562” Width=”3010.497”  WindowState=”Maximized”&gt;<br>&lt;Window.Background&gt;<br>    &lt;ImageBrush ImageSource=”Image/login_bg.jpg”/&gt;<br>&lt;/Window.Background&gt;<br>&lt;Viewbox&gt;<br>    &lt;Grid  Height=”591” Width=”1022”&gt;<br>        &lt;!–&lt;Grid.Background&gt;<br>            &lt;ImageBrush   ImageSource=”/Image/login_bg.jpg”  /&gt;<br>        &lt;/Grid.Background&gt;–&gt;</code></pre></p>
<pre><code>    &amp;lt;Label x:Name=&quot;label&quot; Content=&quot;Login&quot; Foreground=&quot;White&quot; Margin=&quot;122,43,136,0&quot; VerticalAlignment=&quot;Top&quot; FontFamily=&quot;微软雅黑&quot; FontSize=&quot;45px&quot;  HorizontalContentAlignment=&quot;Center&quot; /&amp;gt;
    &amp;lt;TextBox x:Name=&quot;textBox_username&quot; Margin=&quot;374,163,382,380&quot; TextWrapping=&quot;Wrap&quot; Text=&quot;username&quot;  Opacity=&quot;0.5&quot;  FontFamily=&quot;微软雅黑&quot; FontSize=&quot;25px&quot; /&amp;gt;
    &amp;lt;PasswordBox x:Name=&quot;passwordBox_password&quot; Password=&quot;********&quot; Margin=&quot;374,232,382,314&quot;    Opacity=&quot;0.5&quot; FontFamily=&quot;微软雅黑&quot; FontSize=&quot;25px&quot; ToolTip=&quot;please  input your password&quot;/&amp;gt;
    &amp;lt;Button x:Name=&quot;button&quot; IsDefault=&quot;True&quot; Content=&quot;OK&quot; HorizontalAlignment=&quot;Left&quot; Margin=&quot;370,335,0,0&quot; VerticalAlignment=&quot;Top&quot; Width=&quot;94&quot; Height=&quot;41&quot; Opacity=&quot;0.7&quot; FontFamily=&quot;微软雅黑&quot; FontSize=&quot;20px&quot; Click=&quot;button_Click&quot; &amp;gt;
        &amp;lt;Button.Template&amp;gt;
            &amp;lt;ControlTemplate TargetType=&quot;{x:Type Button}&quot;&amp;gt;
                &amp;lt;Border BorderBrush=&quot;{TemplateBinding Control.BorderBrush}&quot; BorderThickness=&quot;0&quot; CornerRadius=&quot;8,8,8,8&quot; Name=&quot;PART_Background&quot;&amp;gt;
                    &amp;lt;Border.Background&amp;gt;
                        &amp;lt;LinearGradientBrush EndPoint=&quot;0,1&quot; StartPoint=&quot;0,0&quot;&amp;gt;
                            &amp;lt;GradientStop Color=&quot;White&quot; Offset=&quot;0.0&quot; /&amp;gt;
                            &amp;lt;GradientStop Color=&quot;Silver&quot; Offset=&quot;0.5&quot; /&amp;gt;
                            &amp;lt;GradientStop Color=&quot;White&quot; Offset=&quot;0.0&quot; /&amp;gt;
                        &amp;lt;/LinearGradientBrush&amp;gt;
                    &amp;lt;/Border.Background&amp;gt;
                    &amp;lt;ContentPresenter Content=&quot;{TemplateBinding ContentControl.Content}&quot; HorizontalAlignment=&quot;Center&quot; VerticalAlignment=&quot;Center&quot; /&amp;gt;
                &amp;lt;/Border&amp;gt;
                &amp;lt;ControlTemplate.Triggers&amp;gt;
                    &amp;lt;Trigger Property=&quot;UIElement.IsMouseOver&quot; Value=&quot;True&quot;&amp;gt;
                        &amp;lt;Setter Property=&quot;Border.Background&quot; TargetName=&quot;PART_Background&quot;&amp;gt;
                            &amp;lt;Setter.Value&amp;gt;
                                &amp;lt;LinearGradientBrush EndPoint=&quot;0,1&quot; StartPoint=&quot;0,0&quot;&amp;gt;
                                    &amp;lt;GradientStop Color=&quot;Silver&quot; Offset=&quot;0.0&quot; /&amp;gt;
                                    &amp;lt;GradientStop Color=&quot;White&quot; Offset=&quot;0.5&quot; /&amp;gt;
                                    &amp;lt;GradientStop Color=&quot;Silver&quot; Offset=&quot;0.0&quot; /&amp;gt;
                                &amp;lt;/LinearGradientBrush&amp;gt;
                            &amp;lt;/Setter.Value&amp;gt;
                        &amp;lt;/Setter&amp;gt;
                    &amp;lt;/Trigger&amp;gt;
                    &amp;lt;Trigger Property=&quot;ButtonBase.IsPressed&quot; Value=&quot;True&quot;&amp;gt;
                        &amp;lt;Setter Property=&quot;UIElement.Effect&quot;&amp;gt;
                            &amp;lt;Setter.Value&amp;gt;
                                &amp;lt;DropShadowEffect BlurRadius=&quot;10&quot; Color=&quot;Black&quot; Direction=&quot;0&quot; Opacity=&quot;0.6&quot; RenderingBias=&quot;Performance&quot; ShadowDepth=&quot;0&quot; /&amp;gt;
                            &amp;lt;/Setter.Value&amp;gt;
                        &amp;lt;/Setter&amp;gt;
                    &amp;lt;/Trigger&amp;gt;
                &amp;lt;/ControlTemplate.Triggers&amp;gt;
            &amp;lt;/ControlTemplate&amp;gt;
        &amp;lt;/Button.Template&amp;gt;
    &amp;lt;/Button&amp;gt;
    &amp;lt;Button x:Name=&quot;button1&quot; IsCancel=&quot;True&quot; Content=&quot;Cancel&quot; HorizontalAlignment=&quot;Left&quot; Margin=&quot;546,335,0,0&quot; VerticalAlignment=&quot;Top&quot; Width=&quot;94&quot; Height=&quot;41&quot; Opacity=&quot;0.7&quot; FontFamily=&quot;微软雅黑&quot; FontSize=&quot;20px&quot; Click=&quot;button1_Click&quot; RenderTransformOrigin=&quot;0.553,1.355&quot; &amp;gt;
        &amp;lt;Button.Template&amp;gt;
            &amp;lt;ControlTemplate TargetType=&quot;{x:Type Button}&quot;&amp;gt;
                &amp;lt;Border BorderBrush=&quot;{TemplateBinding Control.BorderBrush}&quot; BorderThickness=&quot;0&quot; CornerRadius=&quot;8,8,8,8&quot; Name=&quot;PART_Background&quot;&amp;gt;
                    &amp;lt;Border.Background&amp;gt;
                        &amp;lt;LinearGradientBrush EndPoint=&quot;0,1&quot; StartPoint=&quot;0,0&quot;&amp;gt;
                            &amp;lt;GradientStop Color=&quot;White&quot; Offset=&quot;0.0&quot; /&amp;gt;
                            &amp;lt;GradientStop Color=&quot;Silver&quot; Offset=&quot;0.5&quot; /&amp;gt;
                            &amp;lt;GradientStop Color=&quot;White&quot; Offset=&quot;0.0&quot; /&amp;gt;
                        &amp;lt;/LinearGradientBrush&amp;gt;
                    &amp;lt;/Border.Background&amp;gt;
                    &amp;lt;ContentPresenter Content=&quot;{TemplateBinding ContentControl.Content}&quot; HorizontalAlignment=&quot;Center&quot; VerticalAlignment=&quot;Center&quot; /&amp;gt;
                &amp;lt;/Border&amp;gt;
                &amp;lt;ControlTemplate.Triggers&amp;gt;
                    &amp;lt;Trigger Property=&quot;UIElement.IsMouseOver&quot; Value=&quot;True&quot;&amp;gt;
                        &amp;lt;Setter Property=&quot;Border.Background&quot; TargetName=&quot;PART_Background&quot;&amp;gt;
                            &amp;lt;Setter.Value&amp;gt;
                                &amp;lt;LinearGradientBrush EndPoint=&quot;0,1&quot; StartPoint=&quot;0,0&quot;&amp;gt;
                                    &amp;lt;GradientStop Color=&quot;Silver&quot; Offset=&quot;0.0&quot; /&amp;gt;
                                    &amp;lt;GradientStop Color=&quot;White&quot; Offset=&quot;0.5&quot; /&amp;gt;
                                    &amp;lt;GradientStop Color=&quot;Silver&quot; Offset=&quot;0.0&quot; /&amp;gt;
                                &amp;lt;/LinearGradientBrush&amp;gt;
                            &amp;lt;/Setter.Value&amp;gt;
                        &amp;lt;/Setter&amp;gt;
                    &amp;lt;/Trigger&amp;gt;
                    &amp;lt;Trigger Property=&quot;ButtonBase.IsPressed&quot; Value=&quot;True&quot;&amp;gt;
                        &amp;lt;Setter Property=&quot;UIElement.Effect&quot;&amp;gt;
                            &amp;lt;Setter.Value&amp;gt;
                                &amp;lt;DropShadowEffect BlurRadius=&quot;10&quot; Color=&quot;Black&quot; Direction=&quot;0&quot; Opacity=&quot;0.6&quot; RenderingBias=&quot;Performance&quot; ShadowDepth=&quot;0&quot; /&amp;gt;
                            &amp;lt;/Setter.Value&amp;gt;
                        &amp;lt;/Setter&amp;gt;
                    &amp;lt;/Trigger&amp;gt;
                &amp;lt;/ControlTemplate.Triggers&amp;gt;
            &amp;lt;/ControlTemplate&amp;gt;
        &amp;lt;/Button.Template&amp;gt;
    &amp;lt;/Button&amp;gt;
    &amp;lt;TextBlock  HorizontalAlignment=&quot;Left&quot; Margin=&quot;576,282,0,0&quot; VerticalAlignment=&quot;Top&quot; Foreground=&quot;#216380&quot;&amp;gt;
    &amp;lt;Hyperlink NavigateUri=&quot;../Admin/Admin_getPassword&quot; Click=&quot;Hyperlink_getPWD_Click&quot; &amp;gt;找回密码. . . &amp;lt;/Hyperlink&amp;gt;
    &amp;lt;/TextBlock&amp;gt;
&amp;lt;/Grid&amp;gt;
</code></pre><p>&lt;/Viewbox&gt;</p>
<p><br><br><strong>后台逻辑代码：</strong></p>
<p>在构造函数中设置自动适应当前屏幕</p>
<p><pre><code>       double x = SystemParameters.WorkArea.Width;//得到屏幕工作区域宽度<br>        double y = SystemParameters.WorkArea.Height;//得到屏幕工作区域高度<br>        double x1 = SystemParameters.PrimaryScreenWidth;//得到屏幕整体宽度<br>        double y1 = SystemParameters.PrimaryScreenHeight;//得到屏幕整体高度<br>        this.Width = x1;//设置窗体宽度<br>        this.Height = y1;//设置窗体高度<br>        this.Title = “登陆”;</code></pre><br>&nbsp;</p>
<p>双击输入框</p>
<p><div></div></p>
<p><pre><code>    textBox_username.MouseDoubleClick += BoxMouseDoubleClick;<br>    passwordBox_password.MouseDoubleClick += BoxMouseDoubleClick;<br>    private void BoxMouseDoubleClick(object sender, MouseButtonEventArgs e)<br>    {<br>        passwordBox_password.Password = “”;<br>        textBox_username.Text = “”;<br>    }</code></pre><br><br>&nbsp;</p>
<p>点击Cancel</p>
<p><div></div></p>
<p><pre><code>this.Close();</code></pre><br><br>点击OK</p>
<p><pre><code>   /// &lt;summary&gt;<br>    /// 点击OK 实现登陆<br>    /// &lt;/summary&gt;<br>    /// &lt;param name=”sender”&gt;&lt;/param&gt;<br>    /// &lt;param name=”e”&gt;&lt;/param&gt;<br>    private void button_Click(object sender, RoutedEventArgs e)<br>    {<br>        BaseFunc baseFc = new BaseFunc();<br>        username = textBox_username.Text.Trim();</code></pre></p>
<pre><code>    string password = passwordBox_password.Password.Trim();
    if(username==&quot;&quot;||password==&quot;&quot;)
    {
        MessageBox.Show(&quot;请输入正确信息&quot;);
        return;
    }
    else
    {
        bool isLogin = baseFc.GetLoginCheck(username, password);
        if(isLogin)
        {
            //this.Close();
            // MessageBox.Show(&quot;登陆成功&quot;);
            chooseSystem chose = new chooseSystem();
            chose.ShowDialog();
        }
        else
        {
            MessageBox.Show(&quot;登陆失败，无此用户或信息错误&quot;);
        }
    }
    MessageBox.Show(username);

}&lt;/code&gt;&lt;/pre&gt;
</code></pre><p>找回密码的页面与的登陆相同，后台逻辑在之前的博客中已经写过，邮件不会当作垃圾邮件处理，目前不支持域邮箱。再次贴出代码（包括用户检测，邮件发送）</p>
<p><div></div></p>
<p><pre><code>    #region 密码丢失</code></pre></p>
<pre><code>/// &amp;lt;summary&amp;gt;
/// 发送密码
/// &amp;lt;/summary&amp;gt;
/// &amp;lt;param name=&quot;username&quot;&amp;gt;用户名&amp;lt;/param&amp;gt;
/// &amp;lt;param name=&quot;password&quot;&amp;gt;新密码&amp;lt;/param&amp;gt;
/// &amp;lt;returns&amp;gt;&amp;lt;/returns&amp;gt;
public string GetSendpasswrord(string username, string email)
{
    User member = new User();
    if (baseF.GetCheckUser(username))//检查是否已被注册
    {
        try
        {
            SqlConnection conn = connectdb.ConnectDataBase();
            //打开数据库
            conn.Open();
            //创建查询语句
            SqlCommand querySingleInfo = conn.CreateCommand();
                querySingleInfo.CommandText = &quot;SELECT email FROM coustom where UserName=&quot; + &quot;&apos;&quot; + username + &quot;&apos;&quot;;
            SqlDataReader singleInfoReader = querySingleInfo.ExecuteReader();
            //有多行数据，用while循环
            while (singleInfoReader.Read())
            {
                member.email = singleInfoReader[&quot;email&quot;].ToString().Trim();
            }
            if (member.email.Equals(email))
            {
                string pwd = &quot;你的密码是: &quot;;
                //获取密码
                pwd += Getpassrord(username);
                pwd += &quot; , 请妥善保存&quot;;
                //发送邮件
                checkInfo = SendEmail(email, pwd);
            }
            else
            {
                checkInfo = &quot;邮箱错误&quot;;
            }
        }
        catch (SqlException e)
        {
            Console.WriteLine(&quot;查询错误&quot;);
            checkInfo = &quot;查询错误&quot;;
        }
    }
    else
        checkInfo = &quot;用户名不存在&quot;;
    return checkInfo;
}

/// &amp;lt;summary&amp;gt;
/// 获取用户密码
/// &amp;lt;/summary&amp;gt;
/// &amp;lt;param name=&quot;username&quot;&amp;gt;用户名&amp;lt;/param&amp;gt;
/// &amp;lt;returns&amp;gt;返回查询结果&amp;lt;/returns&amp;gt;
private string Getpassrord(string username)
{
    string password = &quot;&quot;;
    try
    {
        SqlConnection conn = connectdb.ConnectDataBase();
        //打开数据库
        conn.Open();
        //创建查询语句
        SqlCommand querySingleInfo = conn.CreateCommand();
            querySingleInfo.CommandText = &quot;SELECT Password FROM coustom where UserName=&quot; + &quot;&apos;&quot; + username + &quot;&apos;&quot;;
        SqlDataReader singleInfoReader = querySingleInfo.ExecuteReader();
        //有多行数据，用while循环
        while (singleInfoReader.Read())
        {
            password = singleInfoReader[&quot;Password&quot;].ToString().Trim();
        }
        //关闭查询
        singleInfoReader.Close();
        //关闭数据库连接
        conn.Close();
    }
    catch (SqlException e)
    {
        password = &quot;查询失败&quot;;
    }
    return password;
}

/// &amp;lt;summary&amp;gt;
/// 发送邮件
/// &amp;lt;/summary&amp;gt;
/// &amp;lt;param name=&quot;email&quot;&amp;gt;邮件&amp;lt;/param&amp;gt;
/// &amp;lt;param name=&quot;password&quot;&amp;gt;授权码&amp;lt;/param&amp;gt;
/// &amp;lt;returns&amp;gt;&amp;lt;/returns&amp;gt;
private string SendEmail(string email, string message)
{
    try
    {
        SmtpClient smtpClient = new SmtpClient();
        smtpClient.EnableSsl = true;
        smtpClient.UseDefaultCredentials = true;
        smtpClient.DeliveryMethod = SmtpDeliveryMethod.Network;//指定电子邮件发送方式        
        smtpClient.Host = &quot;smtp.qq.com&quot;;//指定SMTP服务器  (126)    
        System.Net.NetworkCredential nc = new System.Net.NetworkCredential(&quot;a@qq.com&quot;, &quot;授权码&quot;);
        smtpClient.Credentials = nc;//用户名和授权码
        // 发送邮件设置        
        MailMessage mailMessage = new MailMessage(&quot;a@qq.com&quot;, email); // 发送人和收件人        
        mailMessage.Subject = &quot;密码找回&quot;;//主题        
        mailMessage.Body = message;
        mailMessage.BodyEncoding = Encoding.UTF8;//正文编码        
        mailMessage.IsBodyHtml = true;//设置为HTML格式        
        mailMessage.Priority = MailPriority.High;//优先级
        smtpClient.Send(mailMessage);
        sendInfo = &quot;发送成功&quot;;
    }
    catch (Exception e)
    {
        sendInfo = e.ToString();
    }
    return sendInfo;
}

#endregion&lt;/code&gt;&lt;/pre&gt;
</code></pre><p><br>&nbsp;</p>
<p>&nbsp;</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/wpf/">wpf</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/NET/">.NET</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/wpf/">wpf</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/登陆页面/">登陆页面</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-slack关联gitlb" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/11/01/slack关联gitlb/" class="article-date">
      <time datetime="2016-11-01T15:54:32.000Z" itemprop="datePublished">2016-11-01</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/11/01/slack关联gitlb/">slack关联gitlb</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>slack作为目前团队交流的头号先锋，在我们的项目协调中发挥着很大的作用。其中一项就是实时推送gitlab中的各种动态，此时就需要搭建一个桥梁用来连接，使之实现通讯</p>
<p>&nbsp;</p>
<h1 id="Slack-Service"><a href="#Slack-Service" class="headerlink" title="Slack Service"></a>Slack Service</h1><h2 id="On-Slack"><a href="#On-Slack" class="headerlink" title="On Slack"></a>On Slack</h2><p>To enable Slack integration you must create an incoming webhook integration on Slack:</p>
<ol>
<li><a href="https://slack.com/signin" target="_blank" rel="external">Sign in to Slack</a></li>
<li>Visit <a href="https://my.slack.com/services/new/incoming-webhook/" target="_blank" rel="external">Incoming WebHooks</a></li>
<li>Choose the channel name you want to send notifications to.</li>
<li>Click <strong>Add Incoming WebHooks Integration</strong></li>
<li>Copy the <strong>Webhook URL</strong>, we’ll need this later for GitLab.</li>
</ol>
<h2 id="On-GitLab"><a href="#On-GitLab" class="headerlink" title="On GitLab"></a>On GitLab</h2><p>After you set up Slack, it’s time to set up GitLab.</p>
<p>Go to your project’s <strong>Settings &gt; Services &gt; Slack</strong> and you will see a checkbox with the following events that can be triggered:</p>
<ul>
<li>Push</li>
<li>Issue</li>
<li>Merge request</li>
<li>Note</li>
<li>Tag push</li>
<li>Build</li>
<li>Wiki page<br>Bellow each of these event checkboxes, you will have an input field to insert which Slack channel you want to send that event message, with <code>#general</code> being the default. Enter your preferred channel <strong>without</strong> the hash sign (<code>#</code>).</li>
</ul>
<p>At the end, fill in your Slack details:</p>
<p><table></table></p>
<p><thead></thead></p>
<p><tr class="header"></tr></p>
<p><th align="left">Field</th></p>
<p><th align="left">Description</th><br><br></p>
<p><tbody></tbody></p>
<p><tr class="odd"></tr></p>
<p><td align="left"><strong>Webhook</strong></td></p>
<p><td align="left">The <a href="https://my.slack.com/services/new/incoming-webhook" target="_blank" rel="external">incoming webhook URL</a> which you have to setup on Slack.</td><br></p>
<p><tr class="even"></tr></p>
<p><td align="left"><strong>Username</strong></td></p>
<p><td align="left">Optional username which can be on messages sent to slack. Fill this in if you want to change the username of the bot.</td><br></p>
<p><tr class="odd"></tr></p>
<p><td align="left"><strong>Notify only broken builds</strong></td></p>
<p><td align="left">If you choose to enable the <strong>Build</strong> event and you want to be only notified about failed builds.</td><br><br><br><br>After you are all done, click <strong>Save changes</strong> for the changes to take effect.</p>
<blockquote>
<p><strong>Note:</strong> You can set “branch,pushed,Compare changes” as highlight words on your Slack profile settings, so that you can be aware of new commits when somebody pushes them.<br><img src="https://docs.gitlab.com/ee/project_services/img/slack_configuration.png" alt="Slack configuration"></p>
</blockquote>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/未分类/">未分类</a>
    </div>


      
      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-ThinkPHP实现数据增删改查" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/10/28/ThinkPHP实现数据增删改查/" class="article-date">
      <time datetime="2016-10-28T12:28:34.000Z" itemprop="datePublished">2016-10-28</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/10/28/ThinkPHP实现数据增删改查/">ThinkPHP实现数据增删改查</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <div class="detail-content ">

<p>提到ThinkPHP，相信大家都有听说，相信很多朋友也都已经会使用，今天还是想写一下关于ThinkPHP的一些基本使用方法，希望对还不会使用的朋友能提供一些帮助！</p>
<p>一、下载ThinkPHP源码包，登录ThinkPHP的官方网站：<a href="http://www.thinkphp.cn%EF%BC%8C%E5%9C%A8%E5%8F%B3%E4%BE%A7%E5%8F%AF%E4%BB%A5%E7%9C%8B%E5%88%B0ThinkPHP%E6%BA%90%E7%A0%81%E5%8C%85%E7%9A%84%E4%B8%8B%E8%BD%BD%EF%BC%8C%E6%88%91%E4%BB%AC%E8%BF%99%E9%87%8C%E4%BB%A53.2.3%E8%BF%99%E4%B8%AA%E7%89%88%E6%9C%AC%E8%BF%9B%E8%A1%8C%E8%AE%B2%E8%A7%A3/" target="_blank" rel="nofollow noopener">http://www.thinkphp.cn，在右侧可以看到ThinkPHP源码包的下载，我们这里以3.2.3这个版本进行讲解</a>。<br><img title="ThinkPHP实现数据增删改查_" src="http://img.mukewang.com/5716f6560001162902690205.png" alt="图片描述"><br>二、将下载后得到的包复制到你的服务器运行目录下，如果你使用的是Wamp等一些PHP服务器套件，一般就是需要将其复制到WWW目录下。<br><img title="ThinkPHP实现数据增删改查_" src="http://img.mukewang.com/5716f6dd000161b604220155.png" alt="图片描述"><br>三、这时候在浏览器输入你服务器的访问地址即可成功运行ThinkPHP，例如：<a href="http://localhost/thinkphp%EF%BC%8C%E8%BF%90%E8%A1%8C%E6%88%90%E5%8A%9F%E5%90%8E%EF%BC%8C%E4%BC%9A%E5%BE%97%E5%88%B0%E5%A6%82%E4%B8%8B%E9%A1%B5%E9%9D%A2" target="_blank" rel="nofollow noopener">http://localhost/thinkphp，运行成功后，会得到如下页面</a>：<br><img title="ThinkPHP实现数据增删改查_" src="http://img.mukewang.com/5716f6f20001068305690348.jpg" alt="图片描述"><br>至此，恭喜你已成功安装ThinkPHP。<br>下面说下最基本的“增删改查”四步操作！<br>在使用ThinkPHP之前，我们先来了解一下什么是MVC设计模式，MVC即模型-视图-控制器（Model-View-Controller）的简称，我们举个例子，通过这个例子大家也许可以更好的理解MVC。<br>我们现在想象一个场景，我们在公司上班，我们都会有一个老板，这个老板我们就想象为是控制器，他发话让你去干什么事情，也就是他控制你去干什么事情，具体这件事怎么干他不管，你就可以按照你的方法去做，你做这件事的这个方法就是模型，当你做完这件事后，你把这个事情的结果即视图返回给老板，老板将视图上显示的内容返回给客户。就这么一个过程。下面我们开始数据的增删改查。<br>一、连接数据库<br>1、增加数据，当然需要用到数据库，所以我们先建立一个数据库名为thinkphp，然后在这个库里面新建一张数据表think<em>users，至于为什么前面要加上think</em>，我们待会说，在这张表里面添加3个字段，user_id,user_name,user_password,user<em>score。<br>&lt;img title=”ThinkPHP实现数据增删改查</em>“ src=”<a href="http://img.mukewang.com/57172a020001de9301650119.png" target="_blank" rel="external">http://img.mukewang.com/57172a020001de9301650119.png</a>“ alt=”图片描述” /&gt;<br>2、现在需要在Conf文件夹下的Config.php中加入相关数据库配置代码，这里可以看到数据库表前缀，也就是我们之前为什么要在表名前加think_的原因<br>//数据库配置信息<br>‘DB_TYPE’ =&gt; ‘mysql’, // 数据库类型<br>‘DB_HOST’ =&gt; ‘127.0.0.1’, // 服务器地址<br>‘DB_NAME’ =&gt; ‘thinkphp’, // 数据库名<br>‘DB_USER’ =&gt; ‘root’, // 用户名<br>‘DB_PWD’ =&gt; ‘123456’, // 密码<br>‘DB_PORT’ =&gt; 3306, // 端口<br>‘DB_PARAMS’ =&gt; array(), // 数据库连接参数<br>‘DB<em>PREFIX’ =&gt; ‘think</em>‘, // 数据库表前缀<br>‘DB_CHARSET’=&gt; ‘utf8’, // 字符集<br>‘DB<em>DEBUG’ =&gt; TRUE, // 数据库调试模式 开启后可以记录SQL日志<br>3、现在验证下数据库有没有联通，我们在数据库中插入一些数据，如下：<br>&lt;img title=”ThinkPHP实现数据增删改查</em>“ src=”<a href="http://img.mukewang.com/57172a1d0001ea3606830150.png" target="_blank" rel="external">http://img.mukewang.com/57172a1d0001ea3606830150.png</a>“ alt=”图片描述” /&gt;<br>现在在Controller文件夹下的IndexController.class.php中加入如下代码：<img title="ThinkPHP实现数据增删改查_" src="http://img.mukewang.com/57172a3a0001651504190179.png" alt="图片描述"><br>此时运行浏览器，如果出现下面的数据显示，表示数据库已经成功连接，如果出现错误提示，请检查一下数据库端口或密码是否配置正确。<img title="ThinkPHP实现数据增删改查_" src="http://img.mukewang.com/57172a500001340207140560.png" alt="图片描述"><br>好了，看到这个说明你已经成功连接数据库，并且把数据已经读出来了。<br>二、增加数据<br>数据库连接好了之后，我们下一步就是对数据进行添加了。<br>依旧在刚刚的IndexController.class.php中继续添加代码：<img title="ThinkPHP实现数据增删改查_" src="http://img.mukewang.com/57172a730001676804150113.png" alt="图片描述"><br>现在在浏览器输入地址访问这个addData控制器：<a href="http://localhost:8888/thinkphp/home/index/adddata%EF%BC%8C%E8%BF%99%E4%B8%AA%E5%9C%B0%E5%9D%80%E5%89%8D%E9%9D%A2%E7%9A%84%E5%9F%9F%E5%90%8D%E6%A0%B9%E6%8D%AE%E4%BD%A0%E7%9A%84%E5%AE%9E%E9%99%85%E6%83%85%E5%86%B5%E8%BF%9B%E8%A1%8C%E4%BF%AE%E6%94%B9%EF%BC%8C%E8%BF%99%E6%97%B6%E5%80%99%EF%BC%8C%E9%A1%B5%E9%9D%A2%E5%A6%82%E6%9E%9C%E6%B2%A1%E6%9C%89%E6%8A%A5%E9%94%99%EF%BC%8C%E7%A9%BA%E7%99%BD%E6%98%BE%E7%A4%BA%E5%B0%B1%E8%AF%81%E6%98%8E%E5%B7%B2%E7%BB%8F%E6%88%90%E5%8A%9F%E6%89%A7%E8%A1%8C%E4%BA%86%E3%80%82%E7%8E%B0%E5%9C%A8%E5%9B%9E%E5%88%B0%E5%88%9A%E5%88%9A%E7%9A%84%E6%95%B0%E6%8D%AE%E8%A1%A8%EF%BC%8C%E5%88%B7%E6%96%B0%E5%B0%B1%E5%8F%AF%E4%BB%A5%E7%9C%8B%E5%88%B0%E5%88%9A%E5%88%9A%E6%B7%BB%E5%8A%A0%E7%9A%84%E6%95%B0%E6%8D%AE%EF%BC%8C%E5%AF%86%E7%A0%81%E8%BF%99%E9%87%8C%E8%BF%9B%E8%A1%8C%E4%BA%86MD5%E5%8A%A0%E5%AF%86%E3%80%82![%E5%9B%BE%E7%89%87%E6%8F%8F%E8%BF%B0][9" target="_blank" rel="nofollow noopener">http://localhost:8888/thinkphp/home/index/adddata，这个地址前面的域名根据你的实际情况进行修改，这时候，页面如果没有报错，空白显示就证明已经成功执行了。现在回到刚刚的数据表，刷新就可以看到刚刚添加的数据，密码这里进行了MD5加密。![图片描述][9</a>]<br>三、查询数据<br>其实我们之前已经讲过了，$Users-&gt;select();就可以读出表中的所有数据，只是如果我们需要针对相关条件进行筛选这里要怎么做呢，比如我们现在看一下数据表中完整的数据如下：<img title="ThinkPHP实现数据增删改查_" src="http://img.mukewang.com/57172a950001ac7b06760172.png" alt="图片描述"><br>现在我们需要读取用户分数大于90分的用户，可以这样写：<img title="ThinkPHP实现数据增删改查_" src="http://img.mukewang.com/57172ab40001795e03810069.png" alt="图片描述"><br>在上面的数据表我们可以看到共有三个用户的分数大于90分，所以执行这段查询代码已经就只会得到三个用户的数据，我们现在运行：<a href="http://localhost:8888/thinkphp/home/index/selectscore%EF%BC%8C%E5%BE%97%E5%88%B0%E4%B8%8B%E5%9B%BE%EF%BC%9A![%E5%9B%BE%E7%89%87%E6%8F%8F%E8%BF%B0][12" target="_blank" rel="nofollow noopener">http://localhost:8888/thinkphp/home/index/selectscore，得到下图：![图片描述][12</a>]<br>发现确实只有id为3、4、5的三位用户的数据被查询了出来。<br>四、修改数据<br>那么如何修改数据呢，可以这样写：<img title="ThinkPHP实现数据增删改查_" src="http://img.mukewang.com/57172ada00013f9b04210132.png" alt="图片描述"><br>这时候运行浏览器输入地址<a href="http://localhost:8888/thinkphp/home/index/updatedata，就可以看到user_id为6的用户的数据被修改了。" target="_blank" rel="external">http://localhost:8888/thinkphp/home/index/updatedata，就可以看到user_id为6的用户的数据被修改了。</a><img title="ThinkPHP实现数据增删改查_" src="http://img.mukewang.com/57172b0f0001654806800023.png" alt="图片描述"><br>五、删除数据<br>删除也很简单，只需将代码换为：<br>$Users = M(“Users”); // 实例化Usesr对象<br>$Users-&gt;where(‘user_id=5’)-&gt;delete(); // 删除user_id为5的用户数据<br>这样一运行就可以删除user_id为5的数据了。</p>
<p></p></div><p></p>
<p></p><p class="original">本文原创发布于慕课网 ，转载请注明出处，谢谢合作！</p><br>作者： 当代码遇上音乐<br>链接：<a href="http://www.imooc.com/article/6747?block_id=tuijian_wz" target="_blank" rel="external">http://www.imooc.com/article/6747?block_id=tuijian_wz</a><br>来源：慕课网<br>本文原创发布于慕课网 ，转载请注明出处，谢谢合作！<p></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/ThinkPHP/">ThinkPHP</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/CURD/">CURD</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/thinkphp/">thinkphp</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-sql-server-存储过程入门-二" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/10/28/sql-server-存储过程入门-二/" class="article-date">
      <time datetime="2016-10-28T01:59:28.000Z" itemprop="datePublished">2016-10-28</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/10/28/sql-server-存储过程入门-二/">sql server 存储过程入门(二)</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h2 id="指定参数"><a href="#指定参数" class="headerlink" title="指定参数"></a>指定参数</h2><p>&ensp;&ensp;&ensp;&ensp;通过指定过程参数，调用程序可以将值传递给过程的主体。 在执行过程期间，这些值可以用于各种目的。 如果将参数标记为 OUTPUT 参数，则过程参数还可以将值返回给调用程序。一个过程最多可以有 2100 个参数，每个参数都有名称、数据类型和方向。 还可以为参数指定默认值（可选）。</p>
<h3 id="将值传递给参数"><a href="#将值传递给参数" class="headerlink" title="将值传递给参数"></a>将值传递给参数</h3><pre><code>-- 常量 
use LuckyGitlabStats
go
exec GetMember &apos;webapp&apos;,2
-- 变量  类型和创建时保持一致   set赋值，可以用sql server 自带的参数
declare @groupname nchar(100), @rank nchar(10)  --声明变量
set @groupname=&apos;webapp&apos;;  --变量赋值
set @rank=2
exec GetMember @groupname , @rank   --执行存储过程
</code></pre><h3 id="指定参数名称、类型"><a href="#指定参数名称、类型" class="headerlink" title="指定参数名称、类型"></a>指定参数名称、类型</h3><p>&ensp;&ensp;&ensp;&ensp;创建存储过程、声明参数时，参数名称必须以单个@字符开头，并且在过程范围内必须唯一。<br>  &ensp;&ensp;&ensp;&ensp;必须使用数据类型定义参数。 参数的数据类型确定了在调用过程时该参数所接受值的类型和范围。<br>  &ensp;&ensp;&ensp;&ensp;显式命名参数并将相应的值赋给过程调用中的每个参数允许按任意顺序提供参数。 例如，如果过程 my_proc 应有三个参数，分别命名为 @first、 @second和 @third，则可以将传递到该过程的值赋给参数名称，例如：</p>
<pre><code>EXECUTE my_proc @second = 2, @first = 1, @third = 3;
</code></pre><p><strong>注意</strong></p>
<pre><code>如果以 @parameter =value 格式提供了一个参数值，则必须按此格式提供所有的后续参数。   
如果未以 @parameter =value 格式传递参数值，则必须按 CREATE PROCEDURE 语句中所列的参数顺序（从左到右）提供值。
</code></pre><h3 id="指定参数的默认值"><a href="#指定参数的默认值" class="headerlink" title="指定参数的默认值"></a>指定参数的默认值</h3><p>  &ensp;&ensp;&ensp;&ensp;如果在声明参数时指定了默认值，则参数被视为可选的。 在过程调用中不需要为可选参数提供值。<br>在以下情况下使用参数的默认值：</p>
<ol>
<li>在过程调用中未指定参数值。</li>
<li>在过程调用中将 DEFAULT 关键字指定为值。</li>
</ol>
<p>&ensp;&ensp;&ensp;&ensp;如果没有合适的值可以指定为参数的默认值，则指定 NULL 为默认值。 如果在未提供参数值的情况下执行过程，最好让过程返回自定义的消息。</p>
<p>存储过程GetMember,添加默认值判断</p>
<pre><code>USE [LuckyGitlabStats]
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

ALTER PROCEDURE [dbo].[GetMember] 
    -- Add the parameters for the stored procedure here
    @Groupname nchar(100) = null, 
    @Rank nchar(10) = null
AS
BEGIN
    -- SET NOCOUNT ON added to prevent extra result sets from
    -- interfering with SELECT statements.
    SET NOCOUNT ON;
    if @Groupname IS NULL
    begin
        PRINT &apos;ERROR: You must specify the name of your group.&apos;  
       RETURN  
    end
    -- Insert statements for procedure here
    SELECT * from Member
    where Groupname=@Groupname  and RANK = @Rank
END


-- 执行存储过程
use LuckyGitlabStats
go
--exec GetMember &apos;webapp&apos; , 2
declare  
    @rank nchar(10),
    @Username nchar(100),
    @groupname nchar(100);
 set @rank=2
 set @groupname=&apos;webapp&apos;
EXECUTE  GetMember  &apos;webapp&apos;,2 ,@Username  OUTPUT  
select @UserName

--输出   RROR: You must specify the name of your group.
</code></pre><h3 id="输出参数的方向"><a href="#输出参数的方向" class="headerlink" title="输出参数的方向"></a>输出参数的方向</h3><p>&ensp;&ensp;&ensp;&ensp;参数的方向可以为输入（表明将值传递给过程的主体），也可以为输出（表明过程将值返回给调用程序）。 <strong>默认为输入参数</strong>。<br>&ensp;&ensp;&ensp;&ensp;若要指定输出参数，必须在 CREATE PROCEDURE 语句的参数定义中指定 OUTPUT 关键字。 当过程退出时，它向调用程序返回输出参数的当前值。 执行过程时，调用程序也必须使用 OUTPUT 关键字，才能将该参数值保存到可以在调用程序中使用的变量中。<br>给修改上方例子添加一个输出参数 @Username</p>
<pre><code>USE [LuckyGitlabStats]
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

ALTER PROCEDURE [dbo].[GetMember] 
    -- Add the parameters for the stored procedure here
    @Groupname nchar(100) = null, 
    @Rank nchar(10) output ,
    @Username nchar(100) OUTPUT
AS
BEGIN
    -- SET NOCOUNT ON added to prevent extra result sets from
    -- interfering with SELECT statements.
    SET NOCOUNT ON;
    if @Groupname IS NULL
    begin
        PRINT &apos;ERROR: You must specify the last name of the sales person.&apos;  
       RETURN  
    end
    -- Insert statements for procedure here
    SELECT * from Member
    where Groupname=@Groupname and RANK=@Rank

    select @Username = username 
    from Member 
    where Groupname=@Groupname  and RANK=@Rank
    order by UserName desc
END


-- 执行存储过程

go
--exec GetMember &apos;webapp&apos; , 2
declare -- @rank nchar(10),
     @Username nchar(100);
 -- @groupname nchar(100);

-- set @rank=2
-- set @groupname=&apos;webapp&apos;
EXECUTE  GetMember  &apos;webapp&apos;,2 ,@Username  OUTPUT  
select @UserName
</code></pre><p><strong>注意</strong>  </p>
<pre><code>经测试，一个输出参数，只能返回一个值，当返回一个结果集时，会**按照字典序显示首元素**
</code></pre><h2 id="C-获取SQL-Server-print-结果"><a href="#C-获取SQL-Server-print-结果" class="headerlink" title="C# 获取SQL Server print 结果"></a>C# 获取SQL Server print 结果</h2><pre><code>static public void ExecuteStoredProc()
{
    var connectionString = @&quot;sql&quot;;
    using (var connection = new SqlConnection(connectionString))
    using (var command = new SqlCommand(&quot;GetMember&quot;, connection))
    {
        command.CommandType = CommandType.StoredProcedure;
        command.Parameters.AddWithValue(&quot;@rank&quot;, &quot;2&quot;);

        connection.Open();
        // wire up an event handler to the connection.InfoMessage event
        connection.InfoMessage += connection_InfoMessage;
        var result = command.ExecuteNonQuery();
        connection.Close();
    }
}

static void connection_InfoMessage(object sender, SqlInfoMessageEventArgs e)
{
    // this gets the print statements (maybe the error statements?)
    var outputFromStoredProcedure = e.Message;
    Console.WriteLine(e.Message);
}
</code></pre><h3 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h3><blockquote>
<p><a href="https://docs.microsoft.com/zh-cn/sql/relational-databases/stored-procedures/specify-parameters" target="_blank" rel="external">https://docs.microsoft.com/zh-cn/sql/relational-databases/stored-procedures/specify-parameters</a><br>《sql的查询艺术》</p>
</blockquote>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/sqlserver/">sqlserver</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/存储过程/">存储过程</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-MS Bot 与LUIS关联" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/10/21/MS Bot 与LUIS关联/" class="article-date">
      <time datetime="2016-10-21T15:59:01.000Z" itemprop="datePublished">2016-10-21</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/10/21/MS Bot 与LUIS关联/">MS Bot 与LUIS关联</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>LUIS( Language Understanding Intelligent Service)是微软认知服务的一部分，主要提供语言理解分析交互服务。之前可以通过官网直接把demo搭建到MS Bot和Slack, 现在似乎有点不方便，例如：LUIS关闭了与Slack的直接搭建通道</p>
<p>以下博文来自<a href="http://www.c-sharpcorner.com/article/an-interactive-bot-application-with-luis-using-microsoft-bot/" target="_blank" rel="external">http://www.c-sharpcorner.com/article/an-interactive-bot-application-with-luis-using-microsoft-bot/</a> 作者为微软MVP <a href="http://www.c-sharpcorner.com/members/sourabh-somani" target="_blank" rel="external">Sourabh Somani</a></p>
<p>&nbsp;</p>
<div><strong>Introduction

</strong>In my previous two articles I have explained how can we create a bot application. In this article I will explain you how can we create our bot application more interactive for our user.s In this article I will use one of the <a href="https://www.microsoft.com/cognitive-services" title="Microsoft Cognitive Service" target="_blank" rel="external">Microsoft Cognitive Service</a>s that is <a href="https://www.luis.ai/" title="LUIS" target="_blank" rel="external">LUIS</a>.</div><br><div></div><br><div><strong>My Previous  Articles on Bot Framework</strong></div><br><div><br><br><em>   <a href="http://www.c-sharpcorner.com/article/creating-a-simple-bot-application-using-microsoft-bot-framew/" title="Creating A Simple Bot Application Using Microsoft Bot Framework" target="_blank" rel="external">Creating A Simple Bot Application Using Microsoft Bot Framework</a>
</em>   <a href="http://www.c-sharpcorner.com/article/real-time-bot-project-using-microsoft-bot-framework/" title="Real Time Bot Project Using Microsoft Bot Framework" target="_blank" rel="external">Real Time Bot Project Using Microsoft Bot Framework</a><br></div><br><div><strong>Note: </strong>Here I am giving My Project link because In this article I will use  <a href="http://www.c-sharpcorner.com/article/real-time-bot-project-using-microsoft-bot-framework/" title="Real Time Bot Project Using Microsoft Bot Framework" target="_blank" rel="external">Real Time Bot Project Using Microsoft Bot Framework</a> article and I will add LUIS in this project.</div><br><div></div><br><div><em><strong>What is LUIS ?
</strong></em><strong><em>
</em></strong>According to <a href="https://www.luis.ai/" title="luis.ai" target="_blank" rel="external">luis.ai</a>, LUIS is a Language Understanding Intelligent Service, which offers a  fast and effective way of adding language understanding to applications. With LUIS, you can use pre-existing, world-class, pre-built models from Bing and Cortana whenever they suit your purposes and when you need specialized models, LUIS guides you through the process of quickly building them. LUIS is a part of <a href="https://www.microsoft.com/cognitive-services" title="Microsoft Cognitive Service" target="_blank" rel="external">Microsoft Cognitive Service</a>.</div><br><div></div><br><div><strong>Let’s Understand LUIS with an example</strong>:<br><br>Example 1:<em>
</em><br>Suppose I search in my Windows 10 PC or Windows phone through Cortana like <em>“Where am I,”</em> then I will get a map and my current location. However I am not saying to Cortana to search for location, I am just saying <em><strong>“Where am I”</strong>,</em> And cortana is understanding what am I looking for and this is happening because of LUIS.<br><br><img src="http://csharpcorner.mindcrackerinc.netdna-cdn.com/article/an-interactive-bot-application-with-luis-using-microsoft-bot/Images/1.png" alt=""></div><br><div></div><br><div><strong>Example 2:</strong>_ _Suppose I search like <em>Email to contact@sourabhsomani.com</em> then cortana recognizes my command using LUIS and give me result like as follows:<br><br><img src="http://csharpcorner.mindcrackerinc.netdna-cdn.com/article/an-interactive-bot-application-with-luis-using-microsoft-bot/Images/0.png" alt=""></div><br><div></div><br><div>So in above examples you can see there is more interaction.</div><br><div></div><br><div><strong>Let’s look at my previous example

</strong>In my previous article I created a <a href="http://www.c-sharpcorner.com/article/real-time-bot-project-using-microsoft-bot-framework/" title="Real Time Bot Application" target="_blank" rel="external">Real Time Bot Application</a> where I was searching for stock price by stock symbol like as following figure.<br><br><img src="http://csharpcorner.mindcrackerinc.netdna-cdn.com/article/an-interactive-bot-application-with-luis-using-microsoft-bot/Images/2.png" alt=""></div><br><div></div><br><div>In the above figure you can see that message is not more conversational I am just sending input as _msft <em>and getting result but for our users it will not be more interactive.</em></div><br><div></div><br><div>In this article I will explain to you how can we make our Bot more interactive. Like my input will be <strong>“What about msft”</strong> or _<strong>“What is the price of orcl stock”</strong>, Like as following figure:<br><br><img src="http://csharpcorner.mindcrackerinc.netdna-cdn.com/article/an-interactive-bot-application-with-luis-using-microsoft-bot/Images/3.png" alt=""></div><br><div>The above conversation is more interactive, and this can be done by using LUIS.</div><br><div></div><br><div><strong>Let’s create application step by step<br>**</strong><br>Step 1:<strong> Firstly open visual studio, and create a bot application with any name. Follow following steps to create an Bot application:</strong></div><br><div><br><br>1.  File &gt; New &gt; Project or just Press CTRL + SHIFT + N.<br>2.  Now for Visual C# template select Bot Application then give the name of the application and then click OK button to create the application.<br><br>    <img src="http://csharpcorner.mindcrackerinc.netdna-cdn.com/article/an-interactive-bot-application-with-luis-using-microsoft-bot/Images/4.png" alt=""><br><div>Step 2: <strong>Now go to <a href="https://www.luis.ai/" title="LUIS Website" target="_blank" rel="external">LUIS Website</a>, then login in to your account or register there. Then After create new application.<br><br><img src="http://csharpcorner.mindcrackerinc.netdna-cdn.com/article/an-interactive-bot-application-with-luis-using-microsoft-bot/Images/5.png" alt=""></strong></div><br><div>Step 3:<strong> Now one dialog box will be open; provide Application Name, Description, and Application Culture and then click on Add App Button.<br><br><img src="http://csharpcorner.mindcrackerinc.netdna-cdn.com/article/an-interactive-bot-application-with-luis-using-microsoft-bot/Images/6.PNG" alt=""></strong></div><br><div></div><br></div><br><div>I have created my app by name <em>StockApp</em>.</div><br><div></div><br><div>Step 4:<strong> Now edit your application by clicking on Edit button.<br><br><img src="http://csharpcorner.mindcrackerinc.netdna-cdn.com/article/an-interactive-bot-application-with-luis-using-microsoft-bot/Images/7.png" alt=""></strong></div><br><div></div><br><div>Step 5:<strong><br><br>On the left-hand panel, you will see an option to add entities. So quickly add an Entity with Name</strong>StockSymbol. <strong>Follow following figure to add an entity.<br><br><img src="http://csharpcorner.mindcrackerinc.netdna-cdn.com/article/an-interactive-bot-application-with-luis-using-microsoft-bot/Images/8.png" alt=""></strong></div><br><div></div><br><div><img src="http://csharpcorner.mindcrackerinc.netdna-cdn.com/article/an-interactive-bot-application-with-luis-using-microsoft-bot/Images/9.PNG" alt=""><br><br>What is Entity:<br><br>An entity is a keyword for which we will search like in our example entity is _msft _that is nothing but an Stock Symbol so I have given my entity name <em>StockSymbol</em><strong>.</strong></div><br><div></div><br><div>Step 6:<strong><br><br>On the left-hand panel, you will see an option to Add Intents. So le’ts Quickly add Some intents. Give the name of the intents and example of utterance and Save.<br><br><img src="http://csharpcorner.mindcrackerinc.netdna-cdn.com/article/an-interactive-bot-application-with-luis-using-microsoft-bot/Images/10.png" alt=""></strong></div><br><div><img src="http://csharpcorner.mindcrackerinc.netdna-cdn.com/article/an-interactive-bot-application-with-luis-using-microsoft-bot/Images/11.png" alt=""></div><br><div></div><br><div>I have added two intents StockPrice  and <em>StockPrice2</em>.

What is Intents? :<br><strong><br>Intent means just what we desire and what is our intention so my intention is I would like to ask to my Bot “what about msft” or “what is the price of msft stock”.

</strong>What are utterances:<strong><br><br>How will I search  will be my statements. So I have added 4-5 statements. But after 4-5 LUIS will automatically detect what we want.</strong></div><br>&gt; <div></div><br><div>Step 7: <strong>Now add some utterances like as following.<br><br><img src="http://csharpcorner.mindcrackerinc.netdna-cdn.com/article/an-interactive-bot-application-with-luis-using-microsoft-bot/Images/12.PNG" alt=""><br><br>Here you have to define <em>StockSymbol</em>, After doing this for 4-5 LUIS will automatically detect what is our entity.

</strong>Note:<strong> Don’t forget to add entity by clicking on entity and submiting it after defining entity.</strong></div><br><div></div><br><div>Step 8:<strong> Publish your application by clicking on publish button.<br><br><img src="http://csharpcorner.mindcrackerinc.netdna-cdn.com/article/an-interactive-bot-application-with-luis-using-microsoft-bot/Images/13.png" alt=""></strong></div><br><div></div><br><div>Step 9:<strong> Now one dialog box will open search there for your query.<br><br><img src="http://csharpcorner.mindcrackerinc.netdna-cdn.com/article/an-interactive-bot-application-with-luis-using-microsoft-bot/Images/14.PNG" alt=""></strong></div><br><div></div><br><div>Step 10:<strong> Hit Enter and you will get JSON format result.<br><br><img src="http://csharpcorner.mindcrackerinc.netdna-cdn.com/article/an-interactive-bot-application-with-luis-using-microsoft-bot/Images/15.png" alt=""></strong></div><br><div>Step 11:<strong><br><br>Now again flip to visual studio and create class file for this JSON result. I am addinga  few of the classes for this JOSN result. Class code is given below in figure.<br><br><img src="http://csharpcorner.mindcrackerinc.netdna-cdn.com/article/an-interactive-bot-application-with-luis-using-microsoft-bot/Images/16.PNG" alt=""></strong></div><br>&gt; <div></div><br><div>Well I have just generated this class code using JSON. By Copy and Paste JSON as Classes. <a href="http://www.c-sharpcorner.com/article/how-to-paste-json-as-classes-or-xml-as-classes-in-visual-stu/" title="Learn How can you paste JSON as Classes." target="_blank" rel="external">Learn How can you paste JSON as Classes.</a></div><br><div></div><br><div>Step 12:<strong><br><br>Now Create a class in your project with any name. I am giving Name as </strong>YahooBot**, Which class Yahoo Finance API to get Stock Information, I am writing the following code inside it.</div><br><div><br><div class="dp-highlighter"><br><div class="bar"></div>

<ol>
<li><span class="keyword">using</span> System;</li>
<li><span class="keyword">using</span> System.Collections.Generic;</li>
<li><span class="keyword">using</span> System.Linq;</li>
<li><span class="keyword">using</span> System.Net;</li>
<li><span class="keyword">using</span> System.Threading.Tasks;</li>
<li><span class="keyword">using</span> System.Web;<br>7.8.  <span class="keyword">namespace</span> StockBot2</li>
<li>{</li>
<li><span class="keyword">public</span> <span class="keyword">class</span> YahooBot</li>
<li>{</li>
<li><span class="keyword">public</span> <span class="keyword">static</span> async Task&lt;<span class="keyword">double</span>?&gt; GetStockRateAsync(<span class="keyword">string</span> StockSymbol)</li>
<li>{</li>
<li><span class="keyword">try</span></li>
<li>{</li>
<li><span class="keyword">string</span> ServiceURL = $<span class="string">“<a href="http://finance.yahoo.com/d/quotes.csv?s={StockSymbol}&amp;f=sl1d1nd" target="_blank" rel="external">http://finance.yahoo.com/d/quotes.csv?s={StockSymbol}&amp;f=sl1d1nd</a>“</span>;</li>
<li><span class="keyword">string</span> ResultInCSV;</li>
<li><span class="keyword">using</span> (WebClient client = <span class="keyword">new</span> WebClient())</li>
<li>{</li>
<li>ResultInCSV = await client.DownloadStringTaskAsync(ServiceURL).ConfigureAwait(<span class="keyword">false</span>);</li>
<li>}</li>
<li>var FirstLine = ResultInCSV.Split(<span class="string">‘\n’</span>)[0];</li>
<li>var Price = FirstLine.Split(<span class="string">‘,’</span>)[1];</li>
<li><span class="keyword">if</span> (Price != <span class="keyword">null</span> &amp;&amp; Price.Length &gt;= 0)</li>
<li>{</li>
<li><span class="keyword">double</span> result;</li>
<li><span class="keyword">if</span> (<span class="keyword">double</span>.TryParse(Price, <span class="keyword">out</span> result))</li>
<li>{</li>
<li><span class="keyword">return</span> result;</li>
<li>}</li>
<li>}</li>
<li><span class="keyword">return</span> <span class="keyword">null</span>;</li>
<li>}</li>
<li><span class="keyword">catch</span> (WebException ex)</li>
<li>{</li>
<li><span class="comment">//handle your exception here</span></li>
<li><span class="keyword">throw</span> ex;</li>
<li>}</li>
<li>}</li>
<li>}</li>
<li><p>}<br></p></li></ol></div><br>In the above code you can see a function that is GetStockRateAsync, which takes a StockSymbol as a parameter. I am calling Yahoo Finance API, where I will pass that symbol and that will return a CSV file of stock market rate, and I am splitting CSV File by commas because CSV File means Comma Separated Value. So, I am splitting by comma(,) and getting current price of that stock. Then I am converting it into double because of course our stock rate will be in double and returning current price.</div><p></p>
<div></div><br><div><strong>Step 13:</strong> Now in MessagesController create a class that will call this above function., so I am creating a GetStock function in My MessageController class.</div><br><div><br><div class="dp-highlighter"><br><div class="bar"></div>

<li><p><span class="keyword">private</span> async Task&lt;<span class="keyword">string</span>&gt; GetStock(<span class="keyword">string</span> StockSymbol)</p>
</li>
<li>{</li>
<li><span class="keyword">double</span>? dblStockValue = await YahooBot.GetStockRateAsync(StockSymbol);</li>
<li><span class="keyword">if</span>(dblStockValue==<span class="keyword">null</span>)</li>
<li>{</li>
<li><span class="keyword">return</span> <span class="keyword">string</span>.Format(<span class="string">“This \”{0}\” is not an valid stock symbol”</span>,StockSymbol);</li>
<li>}</li>
<li><span class="keyword">else</span></li>
<li>{</li>
<li><span class="keyword">return</span> <span class="keyword">string</span>.Format(<span class="string">“Stock Price of {0} is {1}”</span>,StockSymbol,dblStockValue);</li>
<li>}</li>
<li><p>}<br></p></li></div><br>In above code you can see I am calling my GetStockRateAsync function that will return a nullable double. I am checking whether that stock value is null or not. According to stock value I am returning appropriate string.</div><p></p>
<div></div><br><div><strong>Step 14: </strong>As we know we like to interact via LUIS so I am creating one more method in MessagesController with name GetEntityFromLUIS.</div><br><div><br><div class="dp-highlighter"><br><div class="bar"></div>

<li><p><span class="keyword">private</span> <span class="keyword">static</span> async Task&lt;StockLUIS&gt; GetEntityFromLUIS(<span class="keyword">string</span> Query)</p>
</li>
<li>{</li>
<li>Query = Uri.EscapeDataString(Query);</li>
<li>StockLUIS Data = <span class="keyword">new</span> StockLUIS();</li>
<li><span class="keyword">using</span> (HttpClient client=<span class="keyword">new</span> HttpClient())</li>
<li>{</li>
<li><span class="keyword">string</span> RequestURI = <span class="string">“<a href="https://api.projectoxford.ai/luis/v1/application?id=7f626790-38d6-4143-9d46-fe85c56a9016&amp;subscription-key=09f80de609fa4698ab4fe5249321d165&amp;q=" target="_blank" rel="external">https://api.projectoxford.ai/luis/v1/application?id=7f626790-38d6-4143-9d46-fe85c56a9016&amp;subscription-key=09f80de609fa4698ab4fe5249321d165&amp;q=</a>“</span> + Query;</li>
<li>HttpResponseMessage msg = await client.GetAsync(RequestURI);<br>9.10.  <span class="keyword">if</span> (msg.IsSuccessStatusCode)</li>
<li>{</li>
<li>var JsonDataResponse = await msg.Content.ReadAsStringAsync();</li>
<li>Data = JsonConvert.DeserializeObject&lt;StockLUIS&gt;(JsonDataResponse);</li>
<li>}</li>
<li>}</li>
<li><span class="keyword">return</span> Data;</li>
<li><p>}<br></p></li></div><br>Above code will take query from us and process query using LUIS Service and return StockLUIS class object, That is nothing but JSON data as a class format.</div><p></p>
<div></div><br><div><strong>Step 15:</strong> Now write following code in Post Action of Message Controller.</div><br><div><br><div class="dp-highlighter"><br><div class="bar"></div>

<li><p><span class="keyword">public</span> async Task&lt;Message&gt; Post([FromBody]Message message)</p>
</li>
<li>{</li>
<li><span class="keyword">if</span> (message.Type == <span class="string">“Message”</span>)</li>
<li>{</li>
<li><span class="keyword">string</span> StockRateString;</li>
<li>StockLUIS StLUIS = await GetEntityFromLUIS(message.Text);</li>
<li><span class="keyword">if</span>(StLUIS.intents.Count()&gt;0)</li>
<li>{</li>
<li><span class="keyword">switch</span>(StLUIS.intents[0].intent)</li>
<li>{</li>
<li><span class="keyword">case</span> <span class="string">“StockPrice”</span>:</li>
<li>StockRateString = await GetStock(StLUIS.entities[0].entity);</li>
<li><span class="keyword">break</span>;</li>
<li><span class="keyword">case</span> <span class="string">“StockPrice2”</span>:</li>
<li>StockRateString = await GetStock(StLUIS.entities[0].entity);</li>
<li><span class="keyword">break</span>;</li>
<li><span class="keyword">default</span>:</li>
<li>StockRateString = <span class="string">“Sorry, I am not getting you…”</span>;</li>
<li><span class="keyword">break</span>;</li>
<li>}</li>
<li>}</li>
<li><span class="keyword">else</span></li>
<li>{</li>
<li>StockRateString = <span class="string">“Sorry, I am not getting you…”</span>;</li>
<li>}<br>26.27.  <span class="comment">// return our reply to the user</span></li>
<li><span class="keyword">return</span> message.CreateReplyMessage(StockRateString);</li>
<li>}</li>
<li><span class="keyword">else</span></li>
<li>{</li>
<li><span class="keyword">return</span> HandleSystemMessage(message);</li>
<li>}</li>
<li>}<br></li></div><br></div><br><div>Above code takes message from Bot User and sends message to LUIS now LUIS will process the message if the message will be identify then send StockLUIS class Object. Now if data will be identified then it will check intents and whatever entity will return LUIS service that will be pass to Yahoo Web Service and we will get string as a result that will be pass to client. If no Intent will be there then we will tell to our client that <em><strong>“Sorry, I am Not Getting You…”.</strong></em></div><br><div></div><br><div><strong>Step 16: </strong>Now run this project in Emulator.</div><br><div></div><br><div><strong>Output:</strong> If we send wrong query to LUIS then Output will be as follows,

<p><img src="http://csharpcorner.mindcrackerinc.netdna-cdn.com/article/an-interactive-bot-application-with-luis-using-microsoft-bot/Images/17.png" alt=""></p></div><p></p>
<div>If we query with invalid stock symbol then output will be as follows,<br><br><img src="http://csharpcorner.mindcrackerinc.netdna-cdn.com/article/an-interactive-bot-application-with-luis-using-microsoft-bot/Images/18.png" alt=""></div><br><div><strong>Query with valid query and valid stock symbol</strong><em>:</em></div><br><div> <img src="http://csharpcorner.mindcrackerinc.netdna-cdn.com/article/an-interactive-bot-application-with-luis-using-microsoft-bot/Images/19.png" alt=""></div><br><div></div><br><div><img src="http://csharpcorner.mindcrackerinc.netdna-cdn.com/article/an-interactive-bot-application-with-luis-using-microsoft-bot/Images/20.png" alt=""></div><br><div>Suppose in above figure I Forget to provide stock there then also LUIS will give me the accurate result.<br><br><img src="http://csharpcorner.mindcrackerinc.netdna-cdn.com/article/an-interactive-bot-application-with-luis-using-microsoft-bot/Images/21.png" alt=""></div><br><div><strong>Conclusion:</strong></div><br><div><br><br><em>   In this article we have created an interactive Bot Application with LUIS using Microsoft Bot Framework.
</em>   We learn about LUIS and its power.<br>*   We have seen how LUIS helps in powerful interactive Conversation.<br></div>
      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/MS-bot-amp-LUIS/">MS bot&amp;LUIS</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/LUIS/">LUIS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/microsoft-bot/">microsoft bot</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-将bot发布到AZURE" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/10/21/将bot发布到AZURE/" class="article-date">
      <time datetime="2016-10-21T15:44:10.000Z" itemprop="datePublished">2016-10-21</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/10/21/将bot发布到AZURE/">将bot发布到AZURE</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>MS Bot 的官方搭建地方是AZURE，访问方式类似于ASP.NET，属于web应用服务只不过需要使用https通讯协议，通过URL进行访问。</p>
<p>1.在AZURE上创建一个web服务</p>
<p>[caption id=”attachment_189” align=”alignnone” width=”300”]<a href="http://www.ihongguang.cn/wp-content/uploads/2016/10/azure_webbot.png" target="_blank" rel="external"><img src="http://www.ihongguang.cn/wp-content/uploads/2016/10/azure_webbot-300x298.png" alt="创建azure web服务"></a> 创建azure web服务[/caption]</p>
<p>2.在vs2015中，右击解决方案名字，然后点击“<strong>发布</strong>”</p>
<p>3.选择Microsoft Azure app Services，并点击“<strong>下一步</strong>”</p>
<p><img src="http://csharpcorner.mindcrackerinc.netdna-cdn.com/article/publishing-your-bot-application-to-azure/Images/image003.jpg" alt="Microsoft Azure App Services "></p>
<p>4.选择订阅号Subscription，在弹窗 弹窗下方的panel中选择和刚才创建的服务（亦可点击NEW进行创建）</p>
<p><img src="http://csharpcorner.mindcrackerinc.netdna-cdn.com/article/publishing-your-bot-application-to-azure/Images/image004.jpg" alt="SouthEastAsia "></p>
<p>5.点击Create创建，就可以自动在AZURE上自动创建，该服务就会被发布在页面所提供的url中（在创房间bot服务中会用到此url）</p>
<p><img src="http://csharpcorner.mindcrackerinc.netdna-cdn.com/article/publishing-your-bot-application-to-azure/Images/image006.jpg" alt="Microsoft Azure Portal"></p>
<p>&nbsp;</p>
<p>接下来，一路点击next即可完成发布操作。。。。。。</p>
<p>如果代码有更新，直接进行发布即可（以上步骤也会自动省略）</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/MS-bot-amp-LUIS/">MS bot&amp;LUIS</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/bot-framework/">bot framework</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/microsoft-bot/">microsoft bot</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-NET 常用的几种读取XML文件的方法" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/10/18/NET 常用的几种读取XML文件的方法/" class="article-date">
      <time datetime="2016-10-18T12:32:36.000Z" itemprop="datePublished">2016-10-18</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/10/18/NET 常用的几种读取XML文件的方法/">.NET 常用的几种读取XML文件的方法</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>转自 <a href="http://www.cnblogs.com/xiaoxiangfeizi/archive/2011/07/29/2120807.html" target="_blank" rel="external">http://www.cnblogs.com/xiaoxiangfeizi/archive/2011/07/29/2120807.html</a></p>
<p><span style="font-size: medium;">  XML文件是一种常用的文件格式，例如WinForm里面的app.config以及Web程序中的web.config文件，还有许多重要的场所都有它的身影。Xml是Internet环境中跨平台的，依赖于内容的技术，是当前处理结构化文档信息的有力工具。XML是一种简单的数据存储语言，使用一系列简单的标记描述数据，而这些标记可以用方便的方式建立，虽然XML占用的空间比二进制数据要占用更多的空间，但XML极其简单易于掌握和使用。微软也提供了一系列类库来倒帮助我们在应用程序中存储XML文件。</span></p>
<p><span style="font-size: medium;">    “在程序中访问进而操作XML文件一般有两种模型，分别是使用DOM（文档对象模型）和流模型，使用DOM的好处在于它允许编辑和更新XML文档，可以随机访问文档中的数据，可以使用XPath查询，但是，DOM的缺点在于它需要一次性的加载整个文档到内存中，对于大型的文档，这会造成资源问题。流模型很好的解决了这个问题，因为它对XML文件的访问采用的是流的概念，也就是说，任何时候在内存中只有当前节点，但它也有它的不足，它是只读的，仅向前的，不能在文档中执行向后导航操作。”具体参见</span><a href="http://www.yesky.com/155/1915155.shtml" target="_blank" rel="external"><span style="font-size: medium;">在Visual C#中使用XML指南之读取XML</span></a></p>
<p><span style="font-size: medium;">    下面我将介绍三种常用的读取XML文件的方法。分别是</span></p>
<pre><code>1: 使用 XmlDocument
2: 使用 XmlTextReader
3: 使用 Linq to Xml
</code></pre><p>这里我先创建一个XML文件,名为Book.xml下面所有的方法都是基于这个XML文件的,文件内容如下:</p>
<pre><code>1: &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
   2: &lt;bookstore&gt;
   3:   &lt;!--记录书本的信息--&gt;
   4:   &lt;book Type=&quot;必修课&quot; ISBN=&quot;7-111-19149-2&quot;&gt;
   5:     &lt;title&gt;数据结构&lt;/title&gt;
   6:     &lt;author&gt;严蔚敏&lt;/author&gt;
   7:     &lt;price&gt;30.00&lt;/price&gt;
   8:   &lt;/book&gt;
   9:   &lt;book Type=&quot;必修课&quot; ISBN=&quot;7-111-19149-3&quot;&gt;
  10:     &lt;title&gt;路由型与交换型互联网基础&lt;/title&gt;
  11:     &lt;author&gt;程庆梅&lt;/author&gt;
  12:     &lt;price&gt;27.00&lt;/price&gt;
  13:   &lt;/book&gt;
  14:   &lt;book Type=&quot;必修课&quot; ISBN=&quot;7-111-19149-4&quot;&gt;
  15:     &lt;title&gt;计算机硬件技术基础&lt;/title&gt;
  16:     &lt;author&gt;李继灿&lt;/author&gt;
  17:     &lt;price&gt;25.00&lt;/price&gt;
  18:   &lt;/book&gt;
  19:   &lt;book Type=&quot;必修课&quot; ISBN=&quot;7-111-19149-5&quot;&gt;
  20:     &lt;title&gt;软件质量保证与管理&lt;/title&gt;
  21:     &lt;author&gt;朱少民&lt;/author&gt;
  22:     &lt;price&gt;39.00&lt;/price&gt;
  23:   &lt;/book&gt;
  24:   &lt;book Type=&quot;必修课&quot; ISBN=&quot;7-111-19149-6&quot;&gt;
  25:     &lt;title&gt;算法设计与分析&lt;/title&gt;
  26:     &lt;author&gt;王红梅&lt;/author&gt;
  27:     &lt;price&gt;23.00&lt;/price&gt;
  28:   &lt;/book&gt;
  29:   &lt;book Type=&quot;选修课&quot; ISBN=&quot;7-111-19149-1&quot;&gt;
  30:     &lt;title&gt;计算机操作系统&lt;/title&gt;
  31:     &lt;author&gt;7-111-19149-1&lt;/author&gt;
  32:     &lt;price&gt;28&lt;/price&gt;
  33:   &lt;/book&gt;
  34: &lt;/bookstore&gt;
</code></pre><p><span style="font-size: medium;">为了方便读取,我还定义一个书的实体类,名为BookModel,具体内容如下:</span></p>
<pre><code>using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace 使用XmlDocument
 {
   public class BookModel
   {
           public BookModel()
           { }
           /// &lt;summary&gt;
           /// 所对应的课程类型
           /// &lt;/summary&gt;
           private string bookType;

           public string BookType
           {
               get { return bookType; }
               set { bookType = value; }
           }

           /// &lt;summary&gt;
           /// 书所对应的ISBN号
           /// &lt;/summary&gt;
           private string bookISBN;

           public string BookISBN
           {
               get { return bookISBN; }
               set { bookISBN = value; }
           }

           /// &lt;summary&gt;
           /// 书名
           /// &lt;/summary&gt;
           private string bookName;

           public string BookName
           {
               get { return bookName; }
               set { bookName = value; }
           }

           /// &lt;summary&gt;
           /// 作者
           /// &lt;/summary&gt;
          private string bookAuthor;

           public string BookAuthor
           {
               get { return bookAuthor; }
               set { bookAuthor = value; }
           }

           /// &lt;summary&gt;
           /// 价格
           /// &lt;/summary&gt;
           private double bookPrice;

           public double BookPrice
           {
               get { return bookPrice; }
               set { bookPrice = value; }
           }
       }
   }
</code></pre><p><span style="font-size: large;"><strong>1.使用XmlDocument.</strong></span></p>
<p><span style="font-size: medium;">   使用XmlDocument是一种基于文档结构模型的方式来读取XML文件.在XML文件中,我们可以把XML看作是由文档声明(Declare),元素(Element),属性(Attribute),文本(Text)等构成的一个树.最开始的一个结点叫作根结点,每个结点都可以有自己的子结点.得到一个结点后,可以通过一系列属性或方法得到这个结点的值或其它的一些属性.例如:</span></p>
<pre><code>1: xn 代表一个结点
2: xn.Name;//这个结点的名称
3: xn.Value;//这个结点的值
4: xn.ChildNodes;//这个结点的所有子结点
5: xn.ParentNode;//这个结点的父结点
6: .......
</code></pre><p><strong>1.1 读取所有的数据.</strong></p>
<div><span style="font-size: medium;">使用的时候,首先声明一个XmlDocument对象,然后调用Load方法,从指定的路径加载XML文件.</span></div>

<pre><code>1: XmlDocument doc = new XmlDocument();
2: doc.Load(@&quot;..\..\Book.xml&quot;);
</code></pre><p><br><span style="font-size: medium;">  然后可以通过调用SelectSingleNode得到指定的结点,通过GetAttribute得到具体的属性值.参看下面的代码</span></p>
<pre><code>// 得到根节点bookstore
XmlNode xn = xmlDoc.SelectSingleNode(&quot;bookstore&quot;);


// 得到根节点的所有子节点
XmlNodeList xnl = xn.ChildNodes;

foreach (XmlNode xn1 in xnl)
{
   BookModel bookModel = new BookModel();
   // 将节点转换为元素，便于得到节点的属性值
   XmlElement xe = (XmlElement)xn1;
   // 得到Type和ISBN两个属性的属性值
   bookModel.BookISBN = xe.GetAttribute(&quot;ISBN&quot;).ToString();
   bookModel.BookType = xe.GetAttribute(&quot;Type&quot;).ToString();
   // 得到Book节点的所有子节点
   XmlNodeList xnl0 = xe.ChildNodes;
   bookModel.BookName=xnl0.Item(0).InnerText;
   bookModel.BookAuthor=xnl0.Item(1).InnerText;
   bookModel.BookPrice=Convert.ToDouble(xnl0.Item(2).InnerText);
   bookModeList.Add(bookModel);
 }
 dgvBookInfo.DataSource = bookModeList;
</code></pre><p><span style="font-size: medium;">     在正常情况下,上面的代码好像没有什么问题,但是对于读取上面的XML文件,则会出错,原因就是因为我上面的XML文件里面有注释,大家可以参看Book.xml文件中的第三行,我随便加的一句注释.注释也是一种结点类型,在没有特别说明的情况下,会默认它也是一个结点(Node).所以在把结点转换成元素的时候就会报错.”无法将类型为“System.Xml.XmlComment”的对象强制转换为类型“System.Xml.XmlElement”。”</span></p>
<p><a href="http://images.cnblogs.com/cnblogs_com/xiaoxiangfeizi/201107/201107291130587593.png" target="_blank" rel="external"><img src="http://images.cnblogs.com/cnblogs_com/xiaoxiangfeizi/201107/201107291131013675.png" alt="Snap2_thumb1" title="Snap2_thumb1"></a></p>
<p><span style="font-size: medium;">幸亏它里面自带了解决办法,那就是在读取的时候,告诉编译器让它忽略掉里面的注释信息.修改如下:</span></p>
<pre><code>1: XmlDocument xmlDoc = new XmlDocument();
2: XmlReaderSettings settings = new XmlReaderSettings();
3: settings.IgnoreComments = true;//忽略文档里面的注释
4: XmlReader reader = XmlReader.Create(@&quot;..\..\Book.xml&quot;, settings);
5: xmlDoc.Load(reader);
</code></pre><p><span style="font-size: medium;">最后读取完毕后,记得要关掉reader.</span></p>
<p><div id="codeSnippetWrapper"></div></p>
<p><div id="codeSnippet"></div></p>
<p><pre><span id="lnum1">   1:</span> reader.Close();</pre><br><br><br><span style="font-size: medium;">这样它就不会出现错误.</span></p>
<p><span style="font-size: medium;">最后运行结果如下:</span></p>
<p><a href="http://images.cnblogs.com/cnblogs_com/xiaoxiangfeizi/201107/201107291131047281.png" target="_blank" rel="external"><img src="http://images.cnblogs.com/cnblogs_com/xiaoxiangfeizi/201107/201107291131071096.png" alt="image_thumb8" title="image_thumb8"></a></p>
<p><span style="font-size: medium;"><strong>1.2 增加一本书的信息.</strong></span></p>
<p>1.2 增加一本书的信息.</p>
<p>向文件中添加新的数据的时候,首先也是通过XmlDocument加载整个文档,然后通过调用SelectSingleNode方法获得根结点,通过CreateElement方法创建元素,用CreateAttribute创建属性,用AppendChild把当前结点挂接在其它结点上,用SetAttributeNode设置结点的属性.具体代码如下:</p>
<p>加载文件并选出要结点:</p>
<pre><code>1: XmlDocument doc = new XmlDocument();
2: doc.Load(@&quot;..\..\Book.xml&quot;);
3: XmlNode root = doc.SelectSingleNode(&quot;bookstore&quot;);
</code></pre><p>创建一个结点,并设置结点的属性:</p>
<pre><code>1: XmlElement xelKey = doc.CreateElement(&quot;book&quot;);
2: XmlAttribute xelType = doc.CreateAttribute(&quot;Type&quot;);
3: xelType.InnerText = &quot;adfdsf&quot;;
4: xelKey.SetAttributeNode(xelType);
</code></pre><p>创建子结点:</p>
<pre><code>1: XmlElement xelAuthor = doc.CreateElement(&quot;author&quot;);
2: xelAuthor.InnerText = &quot;dfdsa&quot;;
3: xelKey.AppendChild(xelAuthor);
</code></pre><p>最后把book结点挂接在要结点上,并保存整个文件:</p>
<pre><code>1: root.AppendChild(xelKey);
2: doc.Save(@&quot;..\..\Book.xml&quot;);
</code></pre><p>用上面的方法,是向已有的文件上追加数据,如果想覆盖原有的所有数据,可以更改一下,使用LoadXml方法:</p>
<pre><code>1: XmlDocument doc = new XmlDocument();
2: doc.LoadXml(&quot;&lt;bookstore&gt;&lt;/bookstore&gt;&quot;);//用这句话,会把以前的数据全部覆盖掉,只有你增加的数据
</code></pre><p>直接把根结点选择出来了,后面不用SelectSingleNode方法选择根结点,直接创建结点即可,代码同上.</p>
<p>1.3 删除某一个数据</p>
<p>想要删除某一个结点,直接找到其父结点,然后调用RemoveChild方法即可,现在关键的问题是如何找到这个结点,上面的SelectSingleNode可以传入一个Xpath表,我们通过书的ISBN号来找到这本书所在的结点.如下:</p>
<pre><code>   1: XmlElement xe = xmlDoc.DocumentElement; // DocumentElement 获取xml文档对象的根XmlElement.
   2: string strPath = string.Format(&quot;/bookstore/book[@ISBN=\&quot;{0}\&quot;]&quot;, dgvBookInfo.CurrentRow.Cells[1].Value.ToString());
   3: XmlElement selectXe = (XmlElement)xe.SelectSingleNode(strPath);  //selectSingleNode 根据XPath表达式,获得符合条件的第一个节点.
   4: selectXe.ParentNode.RemoveChild(selectXe);
&quot;/bookstore/book[@ISBN=\&quot;{0}\&quot;]&quot;是一个Xpath表达式,找到ISBN号为所选那一行ISBN号的那本书,有关Xpath的知识请参考:XPath 语法
</code></pre><p>1.4 修改某要条数据</p>
<p>修改某 条数据的话,首先也是用Xpath表达式找到所需要修改的那一个结点,然后如果是元素的话,就直接对这个元素赋值,如果是属性的话,就用SetAttribute方法设置即可.如下:</p>
<pre><code>1: XmlElement xe = xmlDoc.DocumentElement; // DocumentElement 获取xml文档对象的根XmlElement.
2: string strPath = string.Format(&quot;/bookstore/book[@ISBN=\&quot;{0}\&quot;]&quot;, dgvBookInfo.CurrentRow.Cells[1].Value.ToString());
3: XmlElement selectXe = (XmlElement)xe.SelectSingleNode(strPath);  //selectSingleNode 根据XPath表达式,获得符合条件的第一个节点.
4: selectXe.SetAttribute(&quot;Type&quot;, dgvBookInfo.CurrentRow.Cells[0].Value.ToString());//也可以通过SetAttribute来增加一个属性
5: selectXe.GetElementsByTagName(&quot;title&quot;).Item(0).InnerText = dgvBookInfo.CurrentRow.Cells[2].Value.ToString();
6: selectXe.GetElementsByTagName(&quot;author&quot;).Item(0).InnerText = dgvBookInfo.CurrentRow.Cells[3].Value.ToString();
7: selectXe.GetElementsByTagName(&quot;price&quot;).Item(0).InnerText = dgvBookInfo.CurrentRow.Cells[4].Value.ToString();
8: xmlDoc.Save(@&quot;..\..\Book.xml&quot;);
</code></pre><p>2.使用XmlTextReader和XmlTextWriter</p>
<pre><code>XmlTextReader和XmlTextWriter是以流的形式来读写XML文件.
</code></pre><p>2.1XmlTextReader</p>
<p>使用XmlTextReader读取数据的时候,首先创建一个流,然后用read()方法来不断的向下读,根据读取的结点的类型来进行相应的操作.如下:</p>
<pre><code> 1: XmlTextReader reader = new XmlTextReader(@&quot;..\..\Book.xml&quot;);
 2:            List&lt;BookModel&gt; modelList = new List&lt;BookModel&gt;();
 3:            BookModel model = new BookModel();
 4:            while (reader.Read())
 5:            {
 6:               
 7:                if (reader.NodeType == XmlNodeType.Element)
 8:                {
 9:                    if (reader.Name == &quot;book&quot;)
10:                    {
11:                        model.BookType = reader.GetAttribute(0);
12:                        model.BookISBN = reader.GetAttribute(1);
13:                    }
14:                    if (reader.Name == &quot;title&quot;)
15:                    {
16:                        model.BookName=reader.ReadElementString().Trim();
17:                    }
18:                    if (reader.Name == &quot;author&quot;)
19:                    {
20:                        model.BookAuthor = reader.ReadElementString().Trim();
21:                    }
22:                    if (reader.Name == &quot;price&quot;)
23:                    {
24:                        model.BookPrice = Convert.ToDouble(reader.ReadElementString().Trim());
25:                    }
26:                }
27:  
28:                if (reader.NodeType == XmlNodeType.EndElement)
29:                {
30:                    modelList.Add(model);
31:                    model = new BookModel();
32:                }
33:  
34:                
35:            }
36:            modelList.RemoveAt(modelList.Count-1);
37:            this.dgvBookInfo.DataSource = modelList;
</code></pre><p>关键是读取属性的时候,你要先知道哪一个结点具有几个属性,然后通过GetAttribute方法来读取.读取属性还可以用另外一种方法,就是用MoveToAttribute方法.可参见下面的代码:</p>
<pre><code> 1: if (reader.Name == &quot;book&quot;)
 2:     {
 3:         for (int i = 0; i &lt; reader.AttributeCount; i++)
 4:         {
 5:             reader.MoveToAttribute(i);
 6:             string str = &quot;属性：&quot; + reader.Name + &quot;=&quot; + reader.Value;
 7:         }
 8:         model.BookType = reader.GetAttribute(0);
 9:         model.BookISBN = reader.GetAttribute(1);
10:     }
</code></pre><p>效果如下:</p>
<p><img src="http://images.cnblogs.com/cnblogs_com/xiaoxiangfeizi/201107/201107291131098389.png" alt=""></p>
<p>2.2XmlTextWriter</p>
<p>XmlTextWriter写文件的时候,默认是覆盖以前的文件,如果此文件名不存在,它将创建此文件.首先设置一下,你要创建的XML文件格式,</p>
<pre><code>   1: XmlTextWriter myXmlTextWriter = new XmlTextWriter(@&quot;..\..\Book1.xml&quot;, null);
   2: //使用 Formatting 属性指定希望将 XML 设定为何种格式。 这样，子元素就可以通过使用 Indentation 和 IndentChar 属性来缩进。
   3: myXmlTextWriter.Formatting = Formatting.Indented;
然后可以通过WriteStartElement和WriteElementString方法来创建元素,这两者的区别就是如果有子结点的元素,那么创建的时候就用WriteStartElement,然后去创建子元素,创建完毕后,要调用相应的WriteEndElement来告诉编译器,创建完毕,用WriteElementString来创建单个的元素,用WriteAttributeString来创建属性.如下:

   1: XmlTextWriter myXmlTextWriter = new XmlTextWriter(@&quot;..\..\Book1.xml&quot;, null);
   2:            //使用 Formatting 属性指定希望将 XML 设定为何种格式。 这样，子元素就可以通过使用 Indentation 和 IndentChar 属性来缩进。
   3:            myXmlTextWriter.Formatting = Formatting.Indented;
   4:  
   5:            myXmlTextWriter.WriteStartDocument(false);
   6:            myXmlTextWriter.WriteStartElement(&quot;bookstore&quot;);
   7:  
   8:            myXmlTextWriter.WriteComment(&quot;记录书本的信息&quot;);
   9:            myXmlTextWriter.WriteStartElement(&quot;book&quot;);
  10:  
  11:            myXmlTextWriter.WriteAttributeString(&quot;Type&quot;, &quot;选修课&quot;);
  12:            myXmlTextWriter.WriteAttributeString(&quot;ISBN&quot;, &quot;111111111&quot;);
  13:  
  14:            myXmlTextWriter.WriteElementString(&quot;author&quot;,&quot;张三&quot;);
  15:            myXmlTextWriter.WriteElementString(&quot;title&quot;, &quot;职业生涯规划&quot;);
  16:            myXmlTextWriter.WriteElementString(&quot;price&quot;, &quot;16.00&quot;);
  17:  
  18:            myXmlTextWriter.WriteEndElement();
  19:            myXmlTextWriter.WriteEndElement();
  20:  
  21:            myXmlTextWriter.Flush();
  22:            myXmlTextWriter.Close();
</code></pre><p>3.使用Linq to XML.</p>
<p>Linq是C#3.0中出现的一个新特性,使用它可以方便的操作许多数据源,也包括XML文件.使用Linq操作XML文件非常的方便,而且也比较简单.下面直接看代码,</p>
<p>先定义 一个方法显示查询出来的数据</p>
<pre><code> 1: private void showInfoByElements(IEnumerable&lt;XElement&gt; elements)
 2:        {
 3:            List&lt;BookModel&gt; modelList = new List&lt;BookModel&gt;();
 4:            foreach (var ele in elements)
 5:            {
 6:                BookModel model = new BookModel();
 7:                model.BookAuthor = ele.Element(&quot;author&quot;).Value;
 8:                model.BookName = ele.Element(&quot;title&quot;).Value;
 9:                model.BookPrice = Convert.ToDouble(ele.Element(&quot;price&quot;).Value);
10:                model.BookISBN=ele.Attribute(&quot;ISBN&quot;).Value;
11:                model.BookType=ele.Attribute(&quot;Type&quot;).Value;
12:                
13:                modelList.Add(model);
14:            }
15:            dgvBookInfo.DataSource = modelList;
16:        }
</code></pre><p>3.1读取所有的数据</p>
<p>直接找到元素为book的这个结点,然后遍历读取所有的结果.</p>
<p>   1: private void btnReadAll_Click(object sender, EventArgs e)<br>   2:        {<br>   3:            XElement xe = XElement.Load(@”....\Book.xml”);<br>   4:            IEnumerable<xelement> elements = from ele in xe.Elements(“book”)<br>   5:                                             select ele;<br>   6:            showInfoByElements(elements);<br>   7:        }<br>3.2插入一条数据</xelement></p>
<p>插入结点和属性都采用new的方法,如下:<br>   1: private void btnInsert_Click(object sender, EventArgs e)<br>   2:         {<br>   3:             XElement xe = XElement.Load(@”....\Book.xml”);<br>   4:             XElement record = new XElement(<br>   5:             new XElement(“book”,<br>   6:             new XAttribute(“Type”, “选修课”),<br>   7:             new XAttribute(“ISBN”,”7-111-19149-1”),<br>   8:             new XElement(“title”, “计算机操作系统”),<br>   9:             new XElement(“author”, “7-111-19149-1”),<br>  10:             new XElement(“price”, 28.00)));<br>  11:             xe.Add(record);<br>  12:             xe.Save(@”....\Book.xml”);<br>  13:             MessageBox.Show(“插入成功！”);<br>  14:             btnReadAll_Click(sender, e);<br>  15:         }<br>3.3 删除选中的数据</p>
<p>首先得到选中的那一行,通过ISBN号来找到这个元素，然后用Remove方法直接删除，如下：</p>
<p>   1: private void btnDelete_Click(object sender, EventArgs e)<br>   2:        {<br>   3:            if (dgvBookInfo.CurrentRow != null)<br>   4:            {<br>   5:                //dgvBookInfo.CurrentRow.Cells[1]对应着ISBN号<br>   6:                string id = dgvBookInfo.CurrentRow.Cells[1].Value.ToString();<br>   7:                XElement xe = XElement.Load(@”....\Book.xml”);<br>   8:                IEnumerable<xelement> elements = from ele in xe.Elements(“book”)<br>   9:                                                 where (string)ele.Attribute(“ISBN”) == id<br>  10:                                                 select ele;<br>  12:                {<br>  11:                if (elements.Count() &gt; 0)<br>  13:                    elements.First().Remove();<br>  14:                }<br>  15:                xe.Save(@”....\Book.xml”);<br>  16:                MessageBox.Show(“删除成功！”);<br>  17:                btnReadAll_Click(sender, e);<br>  18:<br>  19:            }<br>  20:        }<br>3.4 删除所有的数据</xelement></p>
<p>与上面的类似，选出所有的数据，然后用Remove方法，如下：</p>
<p>   1: private void btnDeleteAll_Click(object sender, EventArgs e)<br>   2:        {<br>   3:            XElement xe = XElement.Load(@”....\Book.xml”);<br>   4:            IEnumerable<xelement> elements = from ele in xe.Elements(“book”)<br>   5:                                             select ele;<br>   6:            if (elements.Count() &gt; 0)<br>   7:            {<br>   8:                elements.Remove();<br>   9:            }<br>  10:            xe.Save(@”....\Book.xml”);<br>  11:            MessageBox.Show(“删除成功！”);<br>  12:            btnReadAll_Click(sender, e);<br>  13:        }<br>3.5 修改某一记录</xelement></p>
<p>首先得到所要修改的某一个结点，然后用SetAttributeValue来修改属性，用ReplaceNodes来修改结点元素。如下：</p>
<p>   1: private void btnSave_Click(object sender, EventArgs e)<br>   2: {<br>   3:     XElement xe = XElement.Load(@”....\Book.xml”);<br>   4:     if (dgvBookInfo.CurrentRow != null)<br>   5:     {<br>   6:         //dgvBookInfo.CurrentRow.Cells[1]对应着ISBN号<br>   7:         string id = dgvBookInfo.CurrentRow.Cells[1].Value.ToString();<br>   8:         IEnumerable<xelement> element = from ele in xe.Elements(“book”)<br>   9:                                         where ele.Attribute(“ISBN”).Value == id<br>  10:                                         select ele;<br>  11:         if (element.Count() &gt; 0)<br>  12:         {<br>  13:             XElement first = element.First();<br>  14:             ///设置新的属性<br>  15:             first.SetAttributeValue(“Type”, dgvBookInfo.CurrentRow.Cells[0].Value.ToString());<br>  16:             ///替换新的节点<br>  17:             first.ReplaceNodes(<br>  18:                      new XElement(“title”, dgvBookInfo.CurrentRow.Cells[2].Value.ToString()),<br>  19:                      new XElement(“author”, dgvBookInfo.CurrentRow.Cells[3].Value.ToString()),<br>  20:                      new XElement(“price”, (double)dgvBookInfo.CurrentRow.Cells[4].Value)<br>  21:                      );<br>  22:         }<br>  23:         xe.Save(@”....\Book.xml”);<br>  24:<br>  25:         MessageBox.Show(“修改成功！”);<br>  26:         btnReadAll_Click(sender, e);<br>  27:     }<br>  28: }</xelement></p>
<p><span style="font-size: medium;">最终效果如下：</span></p>
<p><a href="http://images.cnblogs.com/cnblogs_com/xiaoxiangfeizi/201107/20110729113115793.png" target="_blank" rel="external"><img src="http://images.cnblogs.com/cnblogs_com/xiaoxiangfeizi/201107/201107291131185513.png" alt="image_thumb15" title="image_thumb15"></a></p>
<p><span style="font-size: medium;">有关Linq to XML的知识大家可以参考</span><a href="http://blog.csdn.net/linqmail/article/details/2341575" target="_blank" rel="external"><span style="font-size: medium;">LINQ国人首创LINQ专著——《精通LINQ数据访问技术》</span></a></p>
<p><span style="font-size: medium;">这次就写到这了，我个人也在学习，所以如果大家发现错误，敬请批评指正，共同学习。</span></p>
<p><a href="http://files.cnblogs.com/xiaoxiangfeizi/%E5%87%A0%E7%A7%8D%E4%B8%8D%E5%90%8C%E7%9A%84%E6%96%B9%E6%B3%95%E8%AF%BB%E5%86%99XML%E6%96%87%E4%BB%B6.zip" target="_blank" rel="external">源码</a></p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/C/">C#</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/NET/">.NET</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/C/">C#</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/XML/">XML</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-如何搭建微软聊天机器人Microsoft bot Framework" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/10/18/如何搭建微软聊天机器人Microsoft bot Framework/" class="article-date">
      <time datetime="2016-10-18T01:06:13.000Z" itemprop="datePublished">2016-10-18</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/10/18/如何搭建微软聊天机器人Microsoft bot Framework/">如何搭建微软聊天机器人Microsoft bot Framework ---get start</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>暑假时团队做了一个个Gitlab统计<a href="https://github.com/Alvis888/LuckyGitlabStats" target="_blank" rel="external">网站</a>，并且与slack通过bot进行关联，此篇博文不讲网站，就讲一下bot入门—实现能够在本地进行交互的聊天机器人</p>
<p>microsoft bot framework的使用</p>
<ol>
<li>在本地的vs要选择Visual Studio 2015 (latest update)，可以<a href="http://www.visualstudio.com/" target="_blank" rel="external">点击此处下载</a>免费社区版。</li>
<li><a href="http://aka.ms/bf-bc-vstemplate" target="_blank" rel="external">下载</a>安装bot application template，然后不用解压，直接将压缩包直接放到 “%USERPROFILE%\Documents\Visual Studio 2015\Templates\ProjectTemplates\Visual C#\”这个路径下面。USERPROFILE指的是当前电脑用户，比如C:\Users\用户名.</li>
<li>打开vs，就能看到Bot Application<br><img src="http://www.cuichongyang.cn/wp-content/uploads/2016/07/QQ%E6%88%AA%E5%9B%BE20160719105900.png" alt="QQ截图20160719105900"></li>
</ol>
<p>默认目录中，你会在 Controllers\MessagesController.cs中看到一下代码</p>
<pre><code>[BotAuthentication]
public class MessagesController : ApiController
{
///
/// POST: api/Messages
/// Receive a message from a user and reply to it
///
public async Task Post([FromBody]Activity activity)
{
if (activity.Type == ActivityTypes.Message)
{
ConnectorClient connector = new ConnectorClient(new Uri(activity.ServiceUrl));
// calculate something for us to return
int length = (activity.Text ?? string.Empty).Length;
// return our reply to the user
Activity reply = activity.CreateReply($“You sent {activity.Text} which was {length} characters”);
await connector.Conversations.ReplyToActivityAsync(reply);
}
else
{
HandleSystemMessage(activity);
}
var response = Request.CreateResponse(HttpStatusCode.OK);
return response;
}
</code></pre><p>这是最重要的一个方法。</p>
<p>直接建立的模板是直接可以运行的，但是在运行之前，需要建立<a href="https://download.botframework.com/bf-v3/tools/emulator/publish.htm" target="_blank" rel="external">下载微软的bot模拟器</a>，安装此模拟器。</p>
<p>启动项目，会在浏览器中看到，注意记住端口号，在模拟器中将会用到，这里用的是3979</p>
<p><img src="http://www.cuichongyang.cn/wp-content/uploads/2016/07/QQ%E6%88%AA%E5%9B%BE20160719110957.png" alt="QQ截图20160719110957"></p>
<p>打开模拟器<img src="http://www.cuichongyang.cn/wp-content/uploads/2016/07/QQ%E6%88%AA%E5%9B%BE20160719112912.png" alt="QQ截图20160719112912"></p>
<p>可以看到，有三处地方，bot url，app id,app password，因为是在本地模拟，那么app id,app password可以暂时不用填写，将bot url中端口号与浏览器中对应，其他的不用管(user指的是用户名，比如发送：“我的手机号码是什么？”，bot会将“我”自动识别为我的bot项目中的用户名)<img src="http://www.cuichongyang.cn/wp-content/uploads/2016/07/QQ%E6%88%AA%E5%9B%BE20160719114530.png" alt="QQ截图20160719114530"></p>
<p>看到这个说明运行环境没有问题，至于想要bot帮你作什么事情，需要自己实现后台逻辑代码。</p>
<p>&nbsp;</p>
<p>接下来几篇文章会讲一下如何应用</p>

      
    </div>
    
    <div class="article-info article-info-index">
      
      
    <div class="article-category tagcloud">
    <a class="article-category-link" href="/categories/MS-bot-amp-LUIS/">MS bot&amp;LUIS</a>
    </div>


      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/LUIS/">LUIS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/bot/">bot</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/bot-framework/">bot framework</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/microsoft-bot/">microsoft bot</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/slack/">slack</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
    <article id="post-sql-server-存储过程入门-一以及C-简单调用" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/10/17/sql-server-存储过程入门-一以及C-简单调用/" class="article-date">
      <time datetime="2016-10-17T09:31:12.000Z" itemprop="datePublished">2016-10-17</time>
</a>


    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/10/17/sql-server-存储过程入门-一以及C-简单调用/">sql server 存储过程入门（一）以及C#简单调用</a>
    </h1>
  

      </header>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <p>&ensp;&ensp;&ensp;&ensp;Transact-SQL中的存储过程，非常类似于编程语言中的方法，它可以重复调用。当存储过程执行一次后，可以将语句缓存中，这样下次执行的时候直接使用缓存中的语句。这样就可以提高存储过程的性能。</p>
<h2 id="基本概念"><a href="#基本概念" class="headerlink" title="基本概念"></a>基本概念</h2><p>&ensp;&ensp;&ensp;&ensp;存储过程是由SQL 语句和控制流程语句构成的语句块（语句集合）。他不仅可以输入参数，还可以输出参数。存储过程可以通过接收参数向调用者返回结果集，结果集的格式由调用者确定。可以在存储过程中调用另一个存储过程</p>
<h2 id="创建存储过程并SSMS中执行"><a href="#创建存储过程并SSMS中执行" class="headerlink" title="创建存储过程并SSMS中执行"></a>创建存储过程并SSMS中执行</h2><h3 id="使用-SQL-Server-Management-Studio"><a href="#使用-SQL-Server-Management-Studio" class="headerlink" title="使用 SQL Server Management Studio"></a>使用 SQL Server Management Studio</h3><ol>
<li>在 “对象资源管理器”中，连接到 数据库引擎 的实例，然后展开该实例。</li>
<li>依次展开 “数据库”、 AdventureWorks2012 数据库和 “可编程性”。</li>
<li>右键单击“存储过程”，再单击“新建存储过程”。</li>
<li>在 “查询” 菜单上，单击 “指定模板参数的值”。</li>
<li>在 “指定模板参数的值” 对话框中，输入下列所示的参数值。</li>
</ol>
<table>
<thead>
<tr>
<th>参数</th>
<th>值  </th>
</tr>
</thead>
<tbody>
<tr>
<td>author</td>
<td>作者  </td>
</tr>
<tr>
<td>Create date</td>
<td>创建日期</td>
</tr>
<tr>
<td>Descript</td>
<td>介绍</td>
</tr>
<tr>
<td>Procedure_name</td>
<td>GetXHG</td>
</tr>
<tr>
<td>@Param1</td>
<td>@UserName</td>
</tr>
<tr>
<td>@Datatype_For_Param1</td>
<td>nchar(100)</td>
</tr>
<tr>
<td>Default_Value_For_Param1</td>
<td>NULL</td>
</tr>
<tr>
<td>@Param2</td>
<td></td>
</tr>
<tr>
<td>@Datatype_For_Param2</td>
<td></td>
</tr>
<tr>
<td>Default_Value_For_Param2</td>
<td></td>
</tr>
</tbody>
</table>
<ol>
<li>点击“确定”</li>
<li><p>在<strong>查询编辑器</strong>中，试用一下语句代替SELECT 语句</p>
<pre><code>SELECT password,email,sex,RANK,groupname,isdelete,buildtime  
from Member  
where UserName = @username
</code></pre></li>
</ol>
<ol>
<li>若要测试语法，请在 “查询” 菜单上，单击 “分析”。 如果返回错误消息，则请将这些语句与上述信息进行比较，并视需要进行更正。</li>
<li>若要创建该过程，请在 “查询” 菜单上单击 “执行”。 该过程作为数据库中的对象创建。</li>
<li>若要查看在对象资源管理器中列出的过程，请右键单击“存储过程”，然后选择“刷新”。</li>
<li>若要运行该过程，请在对象资源管理器中右键单击存储过程名称 GetXHG，然后选择“执行存储过程”。</li>
<li>在“执行过程”窗口中，输入 xiehongguang 作为参数 @UserName 的值。<br>&ensp;&ensp;&ensp;&ensp;</li>
</ol>
<h3 id="使用-Transact-SQL-在查询编辑器中创建过程"><a href="#使用-Transact-SQL-在查询编辑器中创建过程" class="headerlink" title="使用 Transact-SQL 在查询编辑器中创建过程"></a>使用 Transact-SQL 在查询编辑器中创建过程</h3><ol>
<li>在 “对象资源管理器”中，连接到 数据库引擎的实例。  </li>
<li>从 “文件” 菜单中，单击 “新建查询”。</li>
<li><p>将以下示例复制并粘贴到查询窗口中，然后单击 “执行”。 该示例将使用其他过程名称创建与上述相同的存储过程。</p>
<pre><code>USE LuckyGitlabStats;  
GO  
CREATE PROCEDURE GetXHG   
    @UserName nchar(100)  
AS   
    SELECT password,email,sex,RANK,groupname,isdelete,buildtime  
    from Member  
    where UserName = @username;  
GO  
</code></pre></li>
<li><p>若要运行该过程，请将以下示例复制并粘贴到一个新的查询窗口中，然后单击 “执行”。 请注意，将显示指定参数值的不同方法。</p>
<pre><code>[USE Lucky;]  
[GO]

EXECUTE GetXHG N&apos;xiehongguang&apos;;  
-- Or  
EXEC dbo.GetXHG @username = N&apos;xiehongguang&apos;;  
GO  
-- Or  
EXECUTE GetXHG @username = N&apos;xiehongguang&apos;;  
GO 
</code></pre></li>
</ol>
<h2 id="C-调用执行"><a href="#C-调用执行" class="headerlink" title="C# 调用执行"></a>C# 调用执行</h2><pre><code>public List&lt;Member&gt; gettest()
{
    List&lt;Member&gt; members = new List&lt;Member&gt;();
    ConnectLocalSQL connectLocaldb = new ConnectLocalSQL();
    SqlConnection conn = connectLocaldb.ConnectDataBase();
    //打开数据库
    conn.Open();
    //创建查询语句
    SqlCommand querySingleInfo = conn.CreateCommand();
    querySingleInfo.CommandText = &quot;GetXHG&quot;;
    querySingleInfo.CommandType = System.Data.CommandType.StoredProcedure;

    //querySingleInfo.Parameters.Add(&quot;@username&quot;, SqlDbType.NChar);
    //querySingleInfo.Parameters[&quot;@username&quot;].Value = &quot;xiehongguang&quot;;

    querySingleInfo.Parameters.AddWithValue(&quot;@username&quot;, &quot;xiehongguang&quot;);
    SqlDataReader userInfoReader = querySingleInfo.ExecuteReader();
    //有多行数据，用while循环
    while (userInfoReader.Read())
    {
        Member member = new Member();
      // member.username = userInfoReader[&quot;UserName&quot;].ToString().Trim();
        member.password = userInfoReader[&quot;Password&quot;].ToString().Trim();
        member.email = userInfoReader[&quot;Email&quot;].ToString().Trim();
        member.sex = userInfoReader[&quot;Sex&quot;].ToString().Trim();
        member.rank = userInfoReader[&quot;Rank&quot;].ToString().Trim();
        member.groupName = userInfoReader[&quot;Groupname&quot;].ToString().Trim();
        member.isdelete = userInfoReader[&quot;IsDelete&quot;].ToString().Trim();
        members.Add(member);
    }
    //关闭查询
    userInfoReader.Close();
    //关闭数据库连接
    conn.Close();
    return members;
} 
</code></pre><h3 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h3><blockquote>
<p><a href="https://docs.microsoft.com/zh-cn/sql/relational-databases/stored-procedures/create-a-stored-procedure" target="_blank" rel="external">https://docs.microsoft.com/zh-cn/sql/relational-databases/stored-procedures/create-a-stored-procedure</a><br><a href="https://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand(v=vs.110).aspx" target="_blank" rel="external">https://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand(v=vs.110).aspx</a><br>《SQL 查询的艺术》</p>
</blockquote>

      
    </div>
    
    <div class="article-info article-info-index">
      
      

      
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/sqlserver/">sqlserver</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/存储过程/">存储过程</a></li></ul>
    </div>

      
      <div class="clearfix"></div>
    </div>
    
  </div>
  
</article>









  
  
    <nav id="page-nav">
      <a class="extend prev" rel="prev" href="/page/2/">&laquo; Prev</a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><a class="page-number" href="/page/5/">5</a><a class="page-number" href="/page/6/">6</a><a class="extend next" rel="next" href="/page/4/">Next &raquo;</a>
    </nav>
  
</div>
      <footer id="footer">
    <div class="outer">
        <div id="footer-info">
            <div class="footer-left">
                <i class="fa fa-copyright"></i> 
                2016-2017 谢红光
            </div>
            <div class="footer-right">
                <a href="http://hexo.io/" target="_blank" title="快速、简洁且高效的博客框架">Hexo</a>  Theme <a href="https://github.com/MOxFIVE/hexo-theme-yelee" target="_blank" title="简而不减 Hexo 双栏博客主题  v3.5">Yelee</a> by MOxFIVE <i class="fa fa-heart animated infinite pulse"></i>
            </div>
        </div>
        
            <div class="visit">
                
                    <span id="busuanzi_container_site_pv" style='display:none'>
                        <span id="site-visit" title="本站到访数"><i class="fa fa-user" aria-hidden="true"></i><span id="busuanzi_value_site_uv"></span>
                        </span>
                    </span>
                
                
                    <span>| </span>
                
                
                    <span id="busuanzi_container_page_pv" style='display:none'>
                        <span id="page-visit"  title="本页阅读量"><i class="fa fa-eye animated infinite pulse" aria-hidden="true"></i><span id="busuanzi_value_page_pv"></span>
                        </span>
                    </span>
                
            </div>
        
    </div>
</footer>
    </div>
    
<script data-main="/js/main.js" src="//cdn.bootcss.com/require.js/2.2.0/require.min.js"></script>

    <script>
        $(document).ready(function() {
            var iPad = window.navigator.userAgent.indexOf('iPad');
            if (iPad > -1 || $(".left-col").css("display") === "none") {
                var bgColorList = ["#9db3f4", "#414141", "#e5a859", "#f5dfc6", "#c084a0", "#847e72", "#cd8390", "#996731"];
                var bgColor = Math.ceil(Math.random() * (bgColorList.length - 1));
                $("body").css({"background-color": bgColorList[bgColor], "background-size": "cover"});
            }
            else {
                var backgroundnum = 6;
                var backgroundimg = "url(/background/bg-x.jpg)".replace(/x/gi, Math.ceil(Math.random() * backgroundnum));
                $("body").css({"background": backgroundimg, "background-attachment": "fixed", "background-size": "cover"});
            }
        })
    </script>





<div class="scroll" id="scroll">
    <a href="#" title="返回顶部"><i class="fa fa-arrow-up"></i></a>
    <a href="#comments" onclick="load$hide();" title="查看评论"><i class="fa fa-comments-o"></i></a>
    <a href="#footer" title="转到底部"><i class="fa fa-arrow-down"></i></a>
</div>
<script>
    // Open in New Window
    
        var oOpenInNew = {
            
            
            
            
            
            
             archives: ".archive-article-title", 
             miniArchives: "a.post-list-link", 
            
             friends: "#js-friends a", 
             socail: ".social a" 
        }
        for (var x in oOpenInNew) {
            $(oOpenInNew[x]).attr("target", "_blank");
        }
    
</script>

<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
</script>
  </div>
</body>
</html>